<!DOCTYPE html><html><head>
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Flourish template: Connections globe</title>
    <style type="text/css">
      * {
          box-sizing: border-box;
      }
      html {
          height: 100%;
      }
      body {
          margin: 0;
          padding: 0;
          color: #ffffff;
          font-family: 'Source Sans Pro', sans-serif;
          font-size: 16px;
          font-weight: 300;
          height: 100%;
          -webkit-font-smoothing: antialiased;
      }
      .no-select {
          -webkit-touch-callout: none;
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
      }
      h1,
      h2,
      h3 {
          font-weight: 300;
          line-height: 1.25;
      }
      b {
          font-weight: 400;
      }
      .full {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
      }
      #shade-left {
          width: 50%;
          min-width: 600px;
          opacity: 1;
          pointer-events: none;
      }
      #nav #logo {
          width: 200px;
          height: 50px;
          background-size: 100%;
          position: fixed;
          bottom: 20px;
          right: 20px;
          pointer-events: none;
          background-size: contain;
          background-repeat: no-repeat;
          background-position: right;
      }
      #globe canvas {
          display: none;
      }
      #nav {
          padding: 10px 10px 10px 20px;
          display: flex;
          display: -webkit-flex;
          align-items: center;
          height: 100%;
          max-width: 375px;
          position: absolute;
          pointer-events: none;
      }
      #nav-inner {
          flex: 1;
          display: inline-block;
      }
      #nav h1 {
          font-size: 1.9em;
          margin: 0 0 1em;
          font-weight: bold;
      }
      #nav h1 .sub {
          font-size: 0.65em;
          font-weight: 300;
      }
      #nav #leaderboard {
          position: relative;
          margin-top: 1em;
          margin-bottom: 30px;
      }
      #nav #leaderboard #top-countries-header {
          font-weight: bold;
      }
      #nav #leaderboard h1 {
          font-size: 1.15em;
      }
      #nav #leaderboard #top-countries {
          position: relative;
      }
      #nav #leaderboard #top-countries .country-name {
          position: absolute;
          top: 0px;
      }
      #nav #leaderboard #top-countries .rank-number {
          position: absolute;
          top: 0px;
          color: rgb(97, 203, 252);
      }
      #nav #leaderboard #top-countries .country-name {
          left: 1.5em;
          cursor: pointer;
          pointer-events: all;
      }
      #nav #leaderboard #top-countries .country-name .value {
          display: none;
          font-size: 0.7em;
          margin-left: 0.25em;
          color: rgb(97, 203, 252);
      }
      body.show-values #nav #leaderboard #top-countries .country-name .value {
          display: inline-block;
      }

      .flourish-popup {
          pointer-events: none;
          color: black!important;
      }
      .flourish-popup h1 {
          margin: 0;
          font-weight: bold;
          font-size: 1em;
      }
      .flourish-popup p {
          margin: 0;
          font-size: 1em;
          color: #777;
      }
      /* Set everything to display none until styles are updated */

      .full,
      #nav {
          visibility: hidden;
      }
      @media screen and (max-width: 500px) {
          body {
              font-size: 11px;
          }
          #nav #leaderboard {
              margin: 0 0 10px;
          }
          #nav h1 {
              width: auto;
          }
          #nav h2 {
              width: auto;
          }
          #nav h2 .search .dropdown-symbol {
              width: 24px;
          }
      }
      @media screen and (max-height: 500px) {
          body {
              font-size: 13px;
          }
          #nav {
              display: block;
          }
          #nav #leaderboard {
              margin: 0 0 10px;
          }
          #nav h1 {
              width: auto;
              margin-bottom: 0.75em;
          }
          #nav h2 {
              width: auto;
          }
          #nav .dropdown .dropdown-symbol {
              width: 24px;
          }
      }
      @media screen and (max-width: 400px) {
          #nav {
              width: 100%;
              max-width: 300px;
              padding-left: 10px;
          }
          #nav h1 {
              width: 100%;
          }
      }
      .button-container {
        text-align: left
      }
      .button-container.button-group .button:hover {
        opacity: 0.75;
      }
      .button-container {
        text-align: left;
      }
      .button-group {
        overflow: hidden;
      }
      .button-group .button {
        border-radius: 0!important;
      }
    </style>
    <style type="text/css" id="user-css"></style>
<!--    <link rel="stylesheet" type="text/css" href="./controls.css" media="screen" />
-->  </head>
  <body>

  <div class="full" id="bg-color"></div>
  <div class="full" id="globe"></div>
  <div class="full grad" id="shade-left"></div>
  <div id="nav" class="no-select">
    <div id="nav-inner">
      <div id="logo"></div>
      <h1>
        <span id="title"></span>
        <div id="subtitle" class="sub"></div>
      </h1>

      <div id="filter1-menu" class="filter-menu"></div>

     	<div id="filter2-menu" class="filter-menu"></div>

      <div id="leaderboard">
        <div id="top-countries-header"></div>
        <div id="top-countries"></div>
      </div>

    </div>
  </div>
	<script type="text/javascript" src="mousewheel-polyfill.js"></script>
  <script type="text/javascript" src="Detector.js"></script>
  <script type="text/javascript" src="three.min.js"></script>
  <script type="text/javascript" src="globe.js"></script>
  


<script>window.Flourish = {"static_prefix":".","environment":"live"};</script><script>var template=function(t){"use strict";function u(t,n){return t<n?-1:n<t?1:n<=t?0:NaN}var o,e,l=(1===(o=u).length&&(e=o,o=function(t,n){return u(e(t),n)}),{left:function(t,n,e,r){for(null==e&&(e=0),null==r&&(r=t.length);e<r;){var i=e+r>>>1;o(t[i],n)<0?e=i+1:r=i}return e},right:function(t,n,e,r){for(null==e&&(e=0),null==r&&(r=t.length);e<r;){var i=e+r>>>1;0<o(t[i],n)?r=i:e=i+1}return e}}).right;var y=Math.sqrt(50),w=Math.sqrt(10),b=Math.sqrt(2);function s(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return 0<=i?(y<=o?10:w<=o?5:b<=o?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(y<=o?10:w<=o?5:b<=o?2:1)}var i=new Date,c=new Date;function h(o,a,e,r){function u(t){return o(t=new Date(+t)),t}return(u.floor=u).ceil=function(t){return o(t=new Date(t-1)),a(t,1),o(t),t},u.round=function(t){var n=u(t),e=u.ceil(t);return t-n<e-t?n:e},u.offset=function(t,n){return a(t=new Date(+t),null==n?1:Math.floor(n)),t},u.range=function(t,n,e){var r,i=[];if(t=u.ceil(t),e=null==e?1:Math.floor(e),!(t<n&&0<e))return i;for(;i.push(r=new Date(+t)),a(t,e),o(t),r<t&&t<n;);return i},u.filter=function(e){return h(function(t){if(t<=t)for(;o(t),!e(t);)t.setTime(t-1)},function(t,n){if(t<=t)if(n<0)for(;++n<=0;)for(;a(t,-1),!e(t););else for(;0<=--n;)for(;a(t,1),!e(t););})},e&&(u.count=function(t,n){return i.setTime(+t),c.setTime(+n),o(i),o(c),Math.floor(e(i,c))},u.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?u.filter(r?function(t){return r(t)%n==0}:function(t){return u.count(0,t)%n==0}):u:null}),u}var n=h(function(){},function(t,n){t.setTime(+t+n)},function(t,n){return n-t});n.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?h(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):n:null};var r=1e3,a=6e4,f=36e5,d=6048e5,C=(h(function(t){t.setTime(Math.floor(t/r)*r)},function(t,n){t.setTime(+t+n*r)},function(t,n){return(n-t)/r},function(t){return t.getUTCSeconds()}),h(function(t){t.setTime(Math.floor(t/a)*a)},function(t,n){t.setTime(+t+n*a)},function(t,n){return(n-t)/a},function(t){return t.getMinutes()}),h(function(t){var n=t.getTimezoneOffset()*a%f;n<0&&(n+=f),t.setTime(Math.floor((+t-n)/f)*f+n)},function(t,n){t.setTime(+t+n*f)},function(t,n){return(n-t)/f},function(t){return t.getHours()}),h(function(t){t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*a)/864e5},function(t){return t.getDate()-1}));function p(n){return h(function(t){t.setDate(t.getDate()-(t.getDay()+7-n)%7),t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+7*n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*a)/d})}var g=p(0),A=p(1),m=(p(2),p(3),p(4)),v=(p(5),p(6),g.range,A.range,m.range,h(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,n){t.setMonth(t.getMonth()+n)},function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),h(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t,n){return n.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));v.every=function(e){return isFinite(e=Math.floor(e))&&0<e?h(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};h(function(t){t.setUTCSeconds(0,0)},function(t,n){t.setTime(+t+n*a)},function(t,n){return(n-t)/a},function(t){return t.getUTCMinutes()}),h(function(t){t.setUTCMinutes(0,0,0)},function(t,n){t.setTime(+t+n*f)},function(t,n){return(n-t)/f},function(t){return t.getUTCHours()});var T=h(function(t){t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n)},function(t,n){return(n-t)/864e5},function(t){return t.getUTCDate()-1});function _(n){return h(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-n)%7),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+7*n)},function(t,n){return(n-t)/d})}var x=_(0),S=_(1),M=(_(2),_(3),_(4)),k=(_(5),_(6),x.range,S.range,M.range,h(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCMonth(t.getUTCMonth()+n)},function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),h(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)},function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));function E(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function N(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function F(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}k.every=function(e){return isFinite(e=Math.floor(e))&&0<e?h(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var z,U,L,D,P={"-":"",_:" ",0:"0"},O=/^\s*\d+/,H=/^%/,Y=/[\\^$*+?|[\]().{}]/g;function j(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function R(t){return t.replace(Y,"\\$&")}function q(t){return new RegExp("^(?:"+t.map(R).join("|")+")","i")}function B(t){for(var n={},e=-1,r=t.length;++e<r;)n[t[e].toLowerCase()]=e;return n}function I(t,n,e){var r=O.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function V(t,n,e){var r=O.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function X(t,n,e){var r=O.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function W(t,n,e){var r=O.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function $(t,n,e){var r=O.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function Z(t,n,e){var r=O.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function G(t,n,e){var r=O.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(68<+r[0]?1900:2e3),e+r[0].length):-1}function Q(t,n,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function J(t,n,e){var r=O.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function K(t,n,e){var r=O.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function tt(t,n,e){var r=O.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function nt(t,n,e){var r=O.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function et(t,n,e){var r=O.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function rt(t,n,e){var r=O.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function it(t,n,e){var r=O.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function ot(t,n,e){var r=O.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function at(t,n,e){var r=H.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function ut(t,n,e){var r=O.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function lt(t,n,e){var r=O.exec(n.slice(e));return r?(t.Q=1e3*+r[0],e+r[0].length):-1}function st(t,n){return j(t.getDate(),n,2)}function ct(t,n){return j(t.getHours(),n,2)}function ht(t,n){return j(t.getHours()%12||12,n,2)}function ft(t,n){return j(1+C.count(v(t),t),n,3)}function dt(t,n){return j(t.getMilliseconds(),n,3)}function pt(t,n){return dt(t,n)+"000"}function gt(t,n){return j(t.getMonth()+1,n,2)}function mt(t,n){return j(t.getMinutes(),n,2)}function vt(t,n){return j(t.getSeconds(),n,2)}function _t(t){var n=t.getDay();return 0===n?7:n}function yt(t,n){return j(g.count(v(t),t),n,2)}function wt(t,n){var e=t.getDay();return t=4<=e||0===e?m(t):m.ceil(t),j(m.count(v(t),t)+(4===v(t).getDay()),n,2)}function bt(t){return t.getDay()}function xt(t,n){return j(A.count(v(t),t),n,2)}function Mt(t,n){return j(t.getFullYear()%100,n,2)}function kt(t,n){return j(t.getFullYear()%1e4,n,4)}function Ct(t){var n=t.getTimezoneOffset();return(0<n?"-":(n*=-1,"+"))+j(n/60|0,"0",2)+j(n%60,"0",2)}function At(t,n){return j(t.getUTCDate(),n,2)}function Tt(t,n){return j(t.getUTCHours(),n,2)}function St(t,n){return j(t.getUTCHours()%12||12,n,2)}function Et(t,n){return j(1+T.count(k(t),t),n,3)}function Nt(t,n){return j(t.getUTCMilliseconds(),n,3)}function Ft(t,n){return Nt(t,n)+"000"}function zt(t,n){return j(t.getUTCMonth()+1,n,2)}function Ut(t,n){return j(t.getUTCMinutes(),n,2)}function Lt(t,n){return j(t.getUTCSeconds(),n,2)}function Dt(t){var n=t.getUTCDay();return 0===n?7:n}function Pt(t,n){return j(x.count(k(t),t),n,2)}function Ot(t,n){var e=t.getUTCDay();return t=4<=e||0===e?M(t):M.ceil(t),j(M.count(k(t),t)+(4===k(t).getUTCDay()),n,2)}function Ht(t){return t.getUTCDay()}function Yt(t,n){return j(S.count(k(t),t),n,2)}function jt(t,n){return j(t.getUTCFullYear()%100,n,2)}function Rt(t,n){return j(t.getUTCFullYear()%1e4,n,4)}function qt(){return"+0000"}function Bt(){return"%"}function It(t){return+t}function Vt(t){return Math.floor(+t/1e3)}z=function(t){var r=t.dateTime,i=t.date,o=t.time,n=t.periods,e=t.days,a=t.shortDays,u=t.months,l=t.shortMonths,s=q(n),c=B(n),h=q(e),f=B(e),d=q(a),p=B(a),g=q(u),m=B(u),v=q(l),_=B(l),y={a:function(t){return a[t.getDay()]},A:function(t){return e[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:null,d:st,e:st,f:pt,H:ct,I:ht,j:ft,L:dt,m:gt,M:mt,p:function(t){return n[+(12<=t.getHours())]},Q:It,s:Vt,S:vt,u:_t,U:yt,V:wt,w:bt,W:xt,x:null,X:null,y:Mt,Y:kt,Z:Ct,"%":Bt},w={a:function(t){return a[t.getUTCDay()]},A:function(t){return e[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return u[t.getUTCMonth()]},c:null,d:At,e:At,f:Ft,H:Tt,I:St,j:Et,L:Nt,m:zt,M:Ut,p:function(t){return n[+(12<=t.getUTCHours())]},Q:It,s:Vt,S:Lt,u:Dt,U:Pt,V:Ot,w:Ht,W:Yt,x:null,X:null,y:jt,Y:Rt,Z:qt,"%":Bt},b={a:function(t,n,e){var r=d.exec(n.slice(e));return r?(t.w=p[r[0].toLowerCase()],e+r[0].length):-1},A:function(t,n,e){var r=h.exec(n.slice(e));return r?(t.w=f[r[0].toLowerCase()],e+r[0].length):-1},b:function(t,n,e){var r=v.exec(n.slice(e));return r?(t.m=_[r[0].toLowerCase()],e+r[0].length):-1},B:function(t,n,e){var r=g.exec(n.slice(e));return r?(t.m=m[r[0].toLowerCase()],e+r[0].length):-1},c:function(t,n,e){return k(t,r,n,e)},d:K,e:K,f:ot,H:nt,I:nt,j:tt,L:it,m:J,M:et,p:function(t,n,e){var r=s.exec(n.slice(e));return r?(t.p=c[r[0].toLowerCase()],e+r[0].length):-1},Q:ut,s:lt,S:rt,u:V,U:X,V:W,w:I,W:$,x:function(t,n,e){return k(t,i,n,e)},X:function(t,n,e){return k(t,o,n,e)},y:G,Y:Z,Z:Q,"%":at};function x(l,s){return function(t){var n,e,r,i=[],o=-1,a=0,u=l.length;for(t instanceof Date||(t=new Date(+t));++o<u;)37===l.charCodeAt(o)&&(i.push(l.slice(a,o)),null!=(e=P[n=l.charAt(++o)])?n=l.charAt(++o):e="e"===n?" ":"0",(r=s[n])&&(n=r(t,e)),i.push(n),a=o+1);return i.push(l.slice(a,o)),i.join("")}}function M(i,o){return function(t){var n,e,r=F(1900);if(k(r,i,t+="",0)!=t.length)return null;if("Q"in r)return new Date(r.Q);if("p"in r&&(r.H=r.H%12+12*r.p),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),r.d="Z"in r?(n=4<(e=(n=N(F(r.y))).getUTCDay())||0===e?S.ceil(n):S(n),n=T.offset(n,7*(r.V-1)),r.y=n.getUTCFullYear(),r.m=n.getUTCMonth(),n.getUTCDate()+(r.w+6)%7):(n=4<(e=(n=o(F(r.y))).getDay())||0===e?A.ceil(n):A(n),n=C.offset(n,7*(r.V-1)),r.y=n.getFullYear(),r.m=n.getMonth(),n.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),e="Z"in r?N(F(r.y)).getUTCDay():o(F(r.y)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(e+5)%7:r.w+7*r.U-(e+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,N(r)):o(r)}}function k(t,n,e,r){for(var i,o,a=0,u=n.length,l=e.length;a<u;){if(l<=r)return-1;if(37===(i=n.charCodeAt(a++))){if(i=n.charAt(a++),!(o=b[i in P?n.charAt(a++):i])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}return y.x=x(i,y),y.X=x(o,y),y.c=x(r,y),w.x=x(i,w),w.X=x(o,w),w.c=x(r,w),{format:function(t){var n=x(t+="",y);return n.toString=function(){return t},n},parse:function(t){var n=M(t+="",E);return n.toString=function(){return t},n},utcFormat:function(t){var n=x(t+="",w);return n.toString=function(){return t},n},utcParse:function(t){var n=M(t,N);return n.toString=function(){return t},n}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),z.format,U=z.parse,L=z.utcFormat,D=z.utcParse;var Xt="%Y-%m-%dT%H:%M:%S.%LZ";Date.prototype.toISOString||L(Xt);+new Date("2000-01-01T00:00:00.000Z")||D(Xt);var Wt={sum:function(t){return t.reduce(function(t,n){return t+n},0)},min:function(t){return Math.min.apply(null,t)},max:function(t){return Math.max.apply(null,t)},median:function(t){var n=t.slice().sort(function(t,n){return n<t}),e=n.length,r=Math.floor(e/2);return e%2==1?n[r]:(n[r-1]+n[r])/2},first:function(t){return t[0]},last:function(t){return t[t.length-1]},random:function(t){return 1<t.length?[Math.floor(Math.random()*t.length)]:t[0]},count:function(t){return t.length}};function $t(n){return Object.keys(n).map(function(t){return n[t]})}Wt.mean=function(t){return Wt.sum(t)/t.length};var Zt={ascending:function(t,n){return n<t},descending:function(t,n){return t<n}};function Gt(t,n){for(var e=[],r={},i=t.length,o=0;o<i;o++){var a=t[o][n];r[a]||(r[a]=!0,e.push(a))}return e}function Qt(t,n){if(Array.isArray(t)){if("string"==typeof n)n=[n];else if(!Array.isArray(n)&&n.some(function(t){return"string"!==t}))return;var s,c,a={},u=n.length,o=[],e="none",h=function(t,n,e){t&&n&&(t[n]=e)};t.forEach(function(r){var i=a;n.every(function(t,n){var e=r[t];return void 0!==e&&(n<u-1?(i.hasOwnProperty(e)||(i[e]={}),i=i[e]):(i.hasOwnProperty(e)||(i[e]=[],o.push({parent:i,prop:e,data:i[e]})),i[e].push(r)),!0)})});var r=function(u,t){if(void 0===u)c=s=void 0,o.forEach(function(t){h(t.parent,t.prop,t.data)}),e="none";else{var l=t?Wt[t]:Wt.sum;if("string"!=typeof u||!l)return;s=1/0,c=-1/0,o.forEach(function(t){var n,e,r=t.data,i=(n=r[0],e={},Object.keys(n).forEach(function(t){e[t]=n[t]}),e);delete i[u];var o=r.map(function(n,t){return t&&Object.keys(i).forEach(function(t){n[t]!==i[t]&&delete i[t]}),n[u]}),a=l(o);a<s&&(s=a),c<a&&(c=a),i[u]=a,h(t.parent,t.prop,i)}),e=t}},l=function(t){"string"==typeof t&&(t=[t]);var n=t.slice().filter(function(t){return null!=t});n.length>u&&(n.length=u);var e=function(t){if(Array.isArray(t))return t.reduce(function(t,n){return t&&t[n]||void 0},a)}(n);if(!e)return[];var r=n.length;if(r===u)return[e];for(var i=$t(e),o=r;o<u-1;o++)i=i.map(function(t){return $t(t)}).reduce(function(t,n){return t.concat(n)});return i};return{get tree(){return a},aggregate:function(t,n){return r(t,n),this},get min_value(){return s},get max_value(){return c},get aggregation_method(){return e},leafData:function(){return o.map(function(t){return t.parent[t.prop]})},extract:function(t,n,e){var r=l(t);if(r&&n){var i=Zt[n];if(!i)return;r.sort(i),0<=e&&r.length>e&&(r.length=e)}return r}}}}function Jt(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[1<r.length?r[0]+r.slice(2):r,+t.slice(e+1)]}function Kt(t){return(t=Jt(Math.abs(t)))?t[1]:NaN}var tn,nn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function en(t){return new rn(t)}function rn(t){if(!(n=nn.exec(t)))throw new Error("invalid format: "+t);var n;this.fill=n[1]||" ",this.align=n[2]||">",this.sign=n[3]||"-",this.symbol=n[4]||"",this.zero=!!n[5],this.width=n[6]&&+n[6],this.comma=!!n[7],this.precision=n[8]&&+n[8].slice(1),this.trim=!!n[9],this.type=n[10]||""}function on(t,n){var e=Jt(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}en.prototype=rn.prototype,rn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var an={"%":function(t,n){return(100*t).toFixed(n)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},g:function(t,n){return t.toPrecision(n)},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return on(100*t,n)},r:on,s:function(t,n){var e=Jt(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(tn=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:a<o?r+new Array(o-a+1).join("0"):0<o?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Jt(t,Math.max(0,n+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function un(t){return t}var ln,sn,cn,hn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function fn(t){var n,u,l,x=t.grouping&&t.thousands?(u=t.grouping,l=t.thousands,function(t,n){for(var e=t.length,r=[],i=0,o=u[0],a=0;0<e&&0<o&&(n<a+o+1&&(o=Math.max(1,n-a)),r.push(t.substring(e-=o,e+o)),!((a+=o+1)>n));)o=u[i=(i+1)%u.length];return r.reverse().join(l)}):un,r=t.currency,M=t.decimal,k=t.numerals?(n=t.numerals,function(t){return t.replace(/[0-9]/g,function(t){return n[+t]})}):un,i=t.percent||"%";function a(t){var s=(t=en(t)).fill,c=t.align,h=t.sign,n=t.symbol,f=t.zero,d=t.width,p=t.comma,g=t.precision,m=t.trim,v=t.type;"n"===v?(p=!0,v="g"):an[v]||(null==g&&(g=12),m=!0,v="g"),(f||"0"===s&&"="===c)&&(f=!0,s="0",c="=");var _="$"===n?r[0]:"#"===n&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",y="$"===n?r[1]:/[%p]/.test(v)?i:"",w=an[v],b=/[defgprs%]/.test(v);function e(t){var n,e,r,i=_,o=y;if("c"===v)o=w(t)+o,t="";else{var a=(t=+t)<0;if(t=w(Math.abs(t),g),m&&(t=function(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(0<i){if(!+t[r])break t;i=0}}return 0<i?t.slice(0,i)+t.slice(n+1):t}(t)),a&&0==+t&&(a=!1),i=(a?"("===h?h:"-":"-"===h||"("===h?"":h)+i,o=("s"===v?hn[8+tn/3]:"")+o+(a&&"("===h?")":""),b)for(n=-1,e=t.length;++n<e;)if((r=t.charCodeAt(n))<48||57<r){o=(46===r?M+t.slice(n+1):t.slice(n))+o,t=t.slice(0,n);break}}p&&!f&&(t=x(t,1/0));var u=i.length+t.length+o.length,l=u<d?new Array(d-u+1).join(s):"";switch(p&&f&&(t=x(l+t,l.length?d-o.length:1/0),l=""),c){case"<":t=i+t+o+l;break;case"=":t=i+l+t+o;break;case"^":t=l.slice(0,u=l.length>>1)+i+t+o+l.slice(u);break;default:t=l+i+t+o}return k(t)}return g=null==g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),e.toString=function(){return t+""},e}return{format:a,formatPrefix:function(t,n){var e=a(((t=en(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Kt(n)/3))),i=Math.pow(10,-r),o=hn[8+r/3];return function(t){return e(i*t)+o}}}}ln=fn({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),sn=ln.format,cn=ln.formatPrefix;var dn=Object.freeze({input_decimal_separator:".",output_separators:",."});function pn(u){for(var t in dn)void 0===u[t]&&(u[t]=dn[t]);return{getParser:function(){return n=u.input_decimal_separator,e=new RegExp("[^-0-9eE"+n+"]","g"),function(t){return"number"==typeof t?t:""===t||void 0===t?NaN:parseFloat(t.replace(e,"").replace(n,"."))};var n,e},getFormatterFunction:function(){return t=u.output_separators,r=1<t.length,i=r?t.charAt(1):t.charAt(0),o=r?t.charAt(0):"",(a=fn((n=i,e=o,{decimal:n,thousands:e,grouping:[3],currency:["",""]})).format).decimal=i,a.thousands=o,a;var t,n,e,r,i,o,a}}}var gn={show_titles:!0,title:"Trading partners of China, UK and USA",subtitle:"Imports and exports by country and year",globe_skin:"world_blue_white.jpg",globe_skin_other:"",distance:1e3,auto_rotate:!0,default_lat:52,default_lon:0,aggregation_method:"sum",num_arrows:20,num_results:5,arrow_scale_reference:"current",arrow_scale:1,arrow_colour:"#FF4110",selected_colour:"#ffff20",text_color:"#ffffff",custom_controls_colors:!1,controls_button_border:"#dddddd",controls_background_color:"#ffffff",controls_channel_color:"#ffffff",controls_text_color:"#333333",controls_opacity:1,leaderboard_country_header:!0,show_values:!0,leaderboard_from_text:"from:",leaderboard_to_text:"to:",filter1:null,f1_type:"categorical",f1_temp_format:"%Y",f1_control:"auto",f1_width:200,f1_play_button:!0,f1_step_time:2,f1_loop:!0,f1_loop_pause:0,f1_sort_options:!0,filter2:null,f2_type:"temporal",f2_temp_format:"%Y",f2_control:"slider",f2_width:200,f2_play_button:!0,f2_step_time:2,f2_loop:!0,f2_loop_pause:0,f2_sort_options:!0,background_colour:"#2B353A",grad_opacity:.85,grad_color:"#000000",grad_overwrite:!1,accent_colour:"#57C1FC",custom_css:!1,css:"",highlighted_arrow:"",localization:{},label_format:{prefix:"$"},popup:{}},mn={},vn=25,_n={};function yn(t,n,e,r,i,o,a){var u=e-t/2-10,l=e+t/2+10,s=t/2+Math.min(0,u-i.left)+Math.max(0,l-i.right);return{pos:[s,a],shape:s-10<5?[-s,-15*o,Math.max(10,5-s),-10*o]:t-5<s+10?[Math.min(-10,t-s-5),-10*o,Math.min(10,t-s),-15*o]:[-10,-10*o,10,-10*o]}}function wn(t,n,e,r,i,o,a){var u=r-n/2-10,l=r+n/2+10,s=n/2+Math.min(0,u-i.top)+Math.max(0,l-i.bottom);return{pos:[a,s],shape:s-10<5?[-15*o,-s,-10*o,Math.max(10,5-s)]:n-5<s+10?[-10*o,Math.min(-10,n-s-5),-15*o,Math.min(10,n-s)]:[-10*o,-10,-10*o,10]}}function bn(t,n,e){var r,i=document.createElementNS("http://www.w3.org/2000/svg",t);if(n)for(r in n)i.setAttribute(r,n[r]);var o=i.style;if(e)for(r in e)o[r]=e[r];return i}_n.bottom=function(t,n){return{shape:[-10,-10,10,-10],pos:[t/2,n+10]}},_n.top=function(t,n){return{shape:[-10,10,10,10],pos:[t/2,-10]}},_n.left=function(t,n){return{shape:[10,10,10,-10],pos:[-10,n/2]}},_n.right=function(t,n){return{shape:[-10,10,-10,-10],pos:[t+10,n/2]}},_n.topLeft=function(t,n){return{shape:[15,10,10,15],pos:[-10,-10]}},_n.bottomLeft=function(t,n){return{shape:[15,-10,10,-15],pos:[-10,n+10]}},_n.topRight=function(t,n){return{shape:[-15,10,-10,15],pos:[t+10,-10]}},_n.bottomRight=function(t,n){return{shape:[-15,-10,-10,-15],pos:[t+10,n+10]}},_n.bottomFlexible=function(t,n,e,r,i){return yn(t,0,e,0,i,1,n+10)},_n.topFlexible=function(t,n,e,r,i){return yn(t,0,e,0,i,-1,-10)},_n.rightFlexible=function(t,n,e,r,i){return wn(0,n,0,r,i,1,t+10)},_n.leftFlexible=function(t,n,e,r,i){return wn(0,n,0,r,i,-1,-10)};var xn,Mn,kn,Cn,An=1,Tn={container:document.body,maxWidth:"70%",point:null,html:null,directions:["bottom","top","left","right","topLeft","bottomLeft","topRight","bottomRight","bottomFlexible","topFlexible","leftFlexible","rightFlexible"],fallbackFit:"horizontal"};function Sn(){for(var t in this.unique_id=An++,Tn)this["_"+t]=Tn[t];this.handlers={click:[]}}function En(n){Sn.prototype[n]=function(t){return void 0===t?this["_"+n]:(this["_"+n]=t,this)}}for(var Nn in Tn)En(Nn);function Fn(){return new Sn}Sn.prototype.point=function(t,n){if(void 0===t)return this._point;if(void 0!==n)this._point=[t,n];else if(t instanceof HTMLElement||t instanceof SVGElement){var e=t.getBoundingClientRect();this._point=[Math.floor(e.left+e.width/2),Math.floor(e.top+e.height/2)]}else console.error("Popup: could not understand argument");return this},Sn.prototype.text=function(t){return this._html=t.replace(/[&<>]/g,function(t){return{"&":"&amp;","<":"&lt;",">":"&gt;"}[t]}),this},Sn.prototype.on=function(t,n){if(!(t in this.handlers))throw new Error("Popup.on: No such event: "+t);return this.handlers[t].push(n),this},Sn.prototype.fire=function(t,n){if(!(t in this.handlers))throw new Error("Popup.fire: No such event: "+t);for(var e=this.handlers[t],r=0;r<e.length;r++)e[r].call(this,n);return this},Sn.prototype._getElement=function(){var n=this,t="flourish-popup-"+n.unique_id,e=document.getElementById(t);if(!e){(e=document.createElement("div")).className="flourish-popup",e.id=t;var r=e.style;r.display="none",r.margin=r.padding=0,r.position="absolute",r.width="80px",r.height="40px",r.boxSizing="border-box",e.addEventListener("click",function(t){n.fire("click",t)},!1);var i=bn("svg",{class:"flourish-popup-svg"},{position:"absolute",top:0,left:0,bottom:0,right:0}),o=bn("filter",{id:"dropshadow-"+n.unique_id,height:"130%"});o.appendChild(bn("feGaussianBlur",{in:"SourceAlpha",stdDeviation:5})),o.appendChild(bn("feOffset",{dx:0,dy:2,result:"offsetblur"}));var a=bn("feComponentTransfer");a.appendChild(bn("feFuncA",{type:"linear",slope:.2})),o.appendChild(a);var u=bn("feMerge");o.appendChild(u),u.appendChild(bn("feMergeNode")),u.appendChild(bn("feMergeNode",{in:"SourceGraphic"})),i.appendChild(o);var l=bn("g",{filter:"url(#dropshadow-"+n.unique_id+")",fill:"white",stroke:"none"});l.appendChild(bn("rect",{x:vn,y:vn,rx:5})),l.appendChild(bn("path")),i.appendChild(l),e.appendChild(i);var s=document.createElement("div");s.className="flourish-popup-content",(r=s.style).position="absolute",r.top=r.left=vn+"px",r.padding="10px",e.appendChild(s),n._getConstrainer().appendChild(e)}return n._resizeConstrainer(),e},Sn.prototype._getConstrainer=function(){var t=document.getElementById("flourish-popup-constrainer");if(t)return t;(t=document.createElement("div")).id="flourish-popup-constrainer";var n=t.style;return n.overflow="hidden",n.pointerEvents="none",n.position="absolute",n.left="0",n.top="0",n.margin="0",n.padding="0",document.body.appendChild(t),this._resizeConstrainer(t),t},Sn.prototype._resizeConstrainer=function(t){var n=t||this._getConstrainer(),e=n.style;document.body.removeChild(n),document.body.getBoundingClientRect(),e.width=document.documentElement.scrollWidth+"px",e.height=document.documentElement.scrollHeight+"px",document.body.appendChild(n)},Sn.prototype.draw=function(){var t=this;if(t._point){var n=document.documentElement.getBoundingClientRect(),e=t._point[0],r=t._point[1],i=t._container.getBoundingClientRect();e<i.left?e=i.left:e>i.right&&(e=i.right),r<i.top?r=i.top:r>i.bottom&&(r=i.bottom);var o,a=e-n.left,u=r-n.top,l=t._getElement(),s=l.style,c=l.querySelector(".flourish-popup-svg"),h=c.querySelector("g"),f=h.querySelector("rect"),d=h.querySelector("path"),p=l.querySelector(".flourish-popup-content");s.display="block",p.style.maxWidth=(o=i,(t._maxWidth.match(/^\d+(?:\.\d+)?%$/)?o.width*parseFloat(t._maxWidth)/100:t._maxWidth.match(/^\d+(?:\.\d+)?(?:px)?$/)?parseFloat(t._maxWidth):(null!=t._maxWidth&&console.error("Popup: Unknown value for maxWidth: "+t._maxWidth),o.width))+"px"),p.innerHTML=t._html;for(var g,m,v=p.getBoundingClientRect();g=Math.ceil(v.width),m=Math.ceil(v.height),s.width=g+2*vn+"px",s.height=m+2*vn+"px",v=p.getBoundingClientRect(),g!=Math.ceil(v.width)||m!=Math.ceil(v.height););f.setAttribute("width",g),f.setAttribute("height",m),c.setAttribute("width",g+2*vn),c.setAttribute("height",m+2*vn);for(var _,y,w,b,x,M,k,C,A,T,S,E,N,F,z,U,L,D,P,O,H=vn-10,Y=null,j=null,R=null,q=1/0,B=1/0,I=0;I<t._directions.length;I++){var V=t._directions[I],X=(w=g,b=m,x=e,M=r,k=i,C=_n[V](w,b,x,M,k),A=x-vn-C.pos[0],T=M-vn-C.pos[1],{left:A,top:T,right:A+w+2*vn,bottom:T+b+2*vn}),W=Math.max(0,Math.floor(i.left)-X.left-H)+Math.max(0,X.right-Math.ceil(i.right)-H),$=Math.max(0,Math.floor(i.top)-X.top-H)+Math.max(0,X.bottom-Math.ceil(i.bottom)-H);if(0==W&&0==$){Y=V;break}(W<q||W==q&&$<_)&&(q=W,_=$,j=V),($<B||$==B&&W<y)&&(B=$,y=W,R=V)}return V=Y||("horizontal"==t._fallbackFit?j:"vertical"==t._fallbackFit?R:(console.warn("Popup: failed to point box of size ("+g+", "+m+") at ("+e+", "+r+") within ("+i.left+", "+i.top+", "+i.right+", "+i.bottom+")"),t._directions[0])),S=s,E=d,N=g,F=m,z=a,U=u,L=e,D=r,P=i,O=_n[V](N,F,L,D,P),S.left=z-vn-O.pos[0]+"px",S.top=U-vn-O.pos[1]+"px",E.setAttribute("d","M0,0L"+O.shape.join(",")+"Z"),E.setAttribute("transform","translate("+(O.pos[0]+vn)+","+(O.pos[1]+vn)+")"),t}console.error("Popup: cannot draw popup till point() has been specified")},Sn.prototype.hide=function(){return this._getElement().style.display="none",this};var zn,Un=!0,Ln={show_popups:!0,text_color:"#333333",align:"left",font_size:12,fill_color:"#ffffff",opacity:1,padding:10,border_radius:3,show_pointer:!0,show_shadow:!0,is_custom:!(Fn.version="1.2.0"),style_popups:!1};function Dn(t){if("number"!=typeof t)return t;var n=Math.round(t*Math.pow(10,2))/100;return 4==Math.round(t).toString().length?n:sn(",")(n)}function Pn(t,n,e){for(var r in Cn=e,Mn=n,Ln)null==Mn[r]&&(Mn[r]=Ln[r]);var i;(i=document.createElement("style")).type="text/css",i.innerHTML=".flourish-popup { pointer-events: none; }.flourish-popup h1 { margin: 0; font-size: inherit; }.flourish-popup h2 { font-weight: normal; font-size: inherit; margin: 0; }.flourish-popup h2 .name { font-weight: bold; }.flourish-popup ul { padding: 0; margin: 0; }.flourish-popup li { font-size: inherit; list-style: none; }",document.head.appendChild(i),xn=Fn().directions(["bottom","left","right","top"]).point(0,0).draw().hide(),this._popup=xn}Pn.prototype.addColumnNames=function(t){if(kn=t,!Mn.custom_template&&Un){for(var n in kn)if(!Array.isArray(kn[n])){var e=kn[n];Mn.custom_template=e+": {{"+e+"}}";break}Un=!1}},Pn.prototype.hide=function(){return xn.hide(),this},Pn.prototype.point=function(t,n){if(1==arguments.length){var e=t.getBoundingClientRect();t=e.left+e.width/2,n=e.top}return xn.point(t,n),this},Pn.prototype.html=function(t){return xn.html(t),this},Pn.prototype.updateStyle=function(){var t=xn._getElement(),n=t.querySelector(".flourish-popup-content");n.style.padding=Mn.padding+"px",n.style.textAlign=Mn.align;var e=t.querySelector(".flourish-popup-svg g");return e.style.fill=Mn.fill_color,e.style.opacity=Mn.opacity,0==Mn.show_shadow?e.removeAttribute("filter"):e.setAttribute("filter","url(#dropshadow-1)"),e.querySelector("rect").setAttribute("rx",Mn.border_radius),e.querySelector("path").style.display=Mn.show_pointer?"block":"none",this},Pn.prototype.draw=function(o,t){if(Mn.show_popups){if(this.updateStyle(),!arguments.length)return xn.draw(),t&&t(xn._getElement()),this;var n="<div style='color: "+Mn.text_color+"; font-size: "+Mn.font_size+"px; text-align:"+Mn.align+";'>";if(Mn.is_custom||Cn)!Mn.is_custom&&Cn?n+=Cn.replace(/\{\{((?:[^}]|\}[^}])*)\}\}/g,function(t,e){var r;if(Array.isArray(kn[e])){var n=kn[e];if(0==n.length)return"";r="<ul>",n.forEach(function(t,n){r+="<li>"+t+": "+o[e][n]+"</li>"}),r+="</ul>"}else r=o[e];return void 0!==r?Dn(r):""}):n+=Mn.custom_template.replace(/\{\{((?:[^}]|\}[^}])*)\}\}/g,function(t,e){var r,i;return Object.keys(kn).some(function(t){if(Array.isArray(kn[t])){var n=kn[t].indexOf(e);if(0<=n)return r=o[t][n],i=t,!0}else if(kn[t]==e)return r=o[t],i=t,!0}),void 0!==r?"<span data-binding='"+i+"'>"+Dn(r)+"</span>":""});else{o.id&&(n+="<h1>"+o.id+"</h1>");var e={};for(var r in kn){var i;if("id"!=r)if("metadata"==r)for(var a=0;a<o.metadata.length;a++)e[i=kn.metadata[a]]||(e[i]=!0,n+="<h2><span class='name' data-binding='metadata'>"+i+"</span>: "+Dn(o.metadata[a])+"</h2>");else{if(i=kn[r],Array.isArray(i))continue;if(e[i])continue;e[i]=!0,n+="<h2><span class='name' data-binding='"+r+"'>"+i+"</span>: "+Dn(o[r])+"</h2>"}}n+="</div>"}return xn.html(n).draw(),t&&t(xn._getElement()),this}},Pn.prototype.directions=function(t){return xn.directions(t)},Pn.prototype.container=function(t){return xn.container(t)};var On,Hn,Yn,jn,Rn,qn,Bn,In,Vn;var Xn,Wn,$n,Zn=(Xn={},Wn=0,$n=function(t,n){if(void 0!==t)return void 0===n?Xn[t]:n!==Xn[t]&&(void 0===Xn[t]&&Object.defineProperty($n,t,{get:function(){return Xn[t]}}),Xn[t]=n,Wn++,!0);var e=Wn;return Wn=0,e});var Gn,Qn=-1/0;function Jn(n,r,i){var o=function(t,n){return u(t.toUpperCase(),n.toUpperCase())},a=function(t,n){return u(In(t),In(n))};return function(){if(!gn[i])return null;var e,t=gn[n];return"temporal"===t?(e=U(gn[r]),function(t,n){return u(e(t),e(n))}):"numeric"===t?a:o}}var Kn=Jn("f1_type","f1_temp_format","f1_sort_options"),te=Jn("f2_type","f2_temp_format","f2_sort_options");function ne(){Zn("locations",mn.locations),Zn("values",mn.values),Zn("separator",gn.localization.input_decimal_separator);var o,t,n=Zn();n&&(In=Vn.getParser(),Hn={},mn.locations.forEach(function(t){if(""!==t.code){var n=In(t.longitude),e=In(t.latitude);isNaN(n)||isNaN(e)||(Hn[t.code]={name:t.name,coords:[n,e]})}}),mn.locations.processed=!0,o=0,On=mn.values.reduce(function(t,n){if(n.src===n.dst)return o++,t;if(!Hn[n.src]||!Hn[n.dst])return t;var e=Hn[n.src],r=Hn[n.dst],i="val"in mn.values.column_names?In(n.val):1;return t.push({src:n.src,dst:n.dst,filter1:n.filter1,filter2:n.filter2,src_name:e.name||n.src,dst_name:r.name||n.dst,src_location:e.coords,dst_location:r.coords,route:n.src+"-"+n.dst,value:i}),t},[]),o&&(1===o?console.warn("1 entry removed because src matched dst"):console.warn(o+" entries removed because src matched dst")),jn=Gt(On,"filter1"),Rn=Gt(On,"filter2"),mn.values.processed=!0,zn.addColumnNames(mn.values.column_names)),qn=jn.slice(),Bn=Rn.slice(),(t=Kn())&&qn.sort(t),(t=te())&&Bn.sort(t),function(t){if(mn.values.column_names.hasOwnProperty("filter1")?null===gn.filter1&&(gn.filter1=qn.length?qn[0]:null):gn.filter1=null,mn.values.column_names.hasOwnProperty("filter2")?""!==gn.filter2&&null!==gn.filter2||(gn.filter2=Bn.length?Bn[0]:null):gn.filter2=null,t||gn.aggregation_method!==Gn.aggregation_method){if(t){var n=[];null!==gn.filter1&&n.push("filter1"),null!==gn.filter2&&n.push("filter2"),n.push("route"),Gn=Qt(On,n)}Gn.aggregate("value",gn.aggregation_method)}Qn=Gn.max_value;var e,r=Gn.extract([gn.filter1,gn.filter2]),i=null,o=null;r.length&&(e=r[0].src,r.every(function(t){return t.src===e})&&(i=e),e=r[0].dst,r.every(function(t){return t.dst===e})&&(o=e));var a=gn.num_arrows;0<a?(Yn=r.filter(function(t){return 0<t.value}).sort(function(t,n){return e=t.value,(r=n.value)<e?-1:e<r?1:e<=r?0:NaN;var e,r}).map(function(t){return t.display_value="val"in mn.values.column_names?t.value:"",t})).length=Math.min(a,Yn.length):Yn=[],Yn.single_src=i,Yn.single_dst=o,Yn.every(function(t){t.route,gn.highlighted_arrow})&&(gn.highlighted_arrow=null)}(n)}var ee="http://www.w3.org/1999/xhtml",re={svg:"http://www.w3.org/2000/svg",xhtml:ee,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ie(t){var n=t+="",e=n.indexOf(":");return 0<=e&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),re.hasOwnProperty(n)?{space:re[n],local:t}:t}function oe(t){var n=ie(t);return(n.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ee&&t.documentElement.namespaceURI===ee?t.createElement(e):t.createElementNS(n,e)}})(n)}function ae(){}function ue(t){return null==t?ae:function(){return this.querySelector(t)}}function le(){return[]}function se(t){return null==t?le:function(){return this.querySelectorAll(t)}}function ce(t){return function(){return this.matches(t)}}function he(t){return new Array(t.length)}function fe(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}fe.prototype={constructor:fe,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var de="$";function pe(t,n,e,r,i,o){for(var a,u=0,l=n.length,s=o.length;u<s;++u)(a=n[u])?(a.__data__=o[u],r[u]=a):e[u]=new fe(t,o[u]);for(;u<l;++u)(a=n[u])&&(i[u]=a)}function ge(t,n,e,r,i,o,a){var u,l,s,c={},h=n.length,f=o.length,d=new Array(h);for(u=0;u<h;++u)(l=n[u])&&(d[u]=s=de+a.call(l,l.__data__,u,n),s in c?i[u]=l:c[s]=l);for(u=0;u<f;++u)(l=c[s=de+a.call(t,o[u],u,o)])?((r[u]=l).__data__=o[u],c[s]=null):e[u]=new fe(t,o[u]);for(u=0;u<h;++u)(l=n[u])&&c[d[u]]===l&&(i[u]=l)}function me(t,n){return t<n?-1:n<t?1:n<=t?0:NaN}function ve(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function _e(t,n){return t.style.getPropertyValue(n)||ve(t).getComputedStyle(t,null).getPropertyValue(n)}function ye(t){return t.trim().split(/^|\s+/)}function we(t){return t.classList||new be(t)}function be(t){this._node=t,this._names=ye(t.getAttribute("class")||"")}function xe(t,n){for(var e=we(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function Me(t,n){for(var e=we(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function ke(){this.textContent=""}function Ce(){this.innerHTML=""}function Ae(){this.nextSibling&&this.parentNode.appendChild(this)}function Te(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Se(){return null}function Ee(){var t=this.parentNode;t&&t.removeChild(this)}function Ne(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function Fe(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}be.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);0<=n&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};var ze={},Ue=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(ze={mouseenter:"mouseover",mouseleave:"mouseout"}));function Le(e,t,n){return e=De(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function De(e,r,i){return function(t){var n=Ue;Ue=t;try{e.call(this,this.__data__,r,i)}finally{Ue=n}}}function Pe(o){return function(){var t=this.__on;if(t){for(var n,e=0,r=-1,i=t.length;e<i;++e)n=t[e],o.type&&n.type!==o.type||n.name!==o.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?t.length=r:delete this.__on}}}function Oe(l,s,c){var h=ze.hasOwnProperty(l.type)?Le:De;return function(t,n,e){var r,i=this.__on,o=h(s,n,e);if(i)for(var a=0,u=i.length;a<u;++a)if((r=i[a]).type===l.type&&r.name===l.name)return this.removeEventListener(r.type,r.listener,r.capture),this.addEventListener(r.type,r.listener=o,r.capture=c),void(r.value=s);this.addEventListener(l.type,o,c),r={type:l.type,name:l.name,value:s,listener:o,capture:c},i?i.push(r):this.__on=[r]}}function He(t,n,e){var r=ve(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}var Ye=[null];function je(t,n){this._groups=t,this._parents=n}function Re(){return new je([[document.documentElement]],Ye)}function qe(t){return"string"==typeof t?new je([[document.querySelector(t)]],[document.documentElement]):new je([[t]],Ye)}function Be(t){var n=function(){for(var t,n=Ue;t=n.sourceEvent;)n=t;return n}();return n.changedTouches&&(n=n.changedTouches[0]),function(t,n){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[n.clientX-i.left-t.clientLeft,n.clientY-i.top-t.clientTop]}(t,n)}function Ie(t){return"string"==typeof t?new je([document.querySelectorAll(t)],[document.documentElement]):new je([null==t?[]:t],Ye)}je.prototype=Re.prototype={constructor:je,select:function(t){"function"!=typeof t&&(t=ue(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a,u=n[i],l=u.length,s=r[i]=new Array(l),c=0;c<l;++c)(o=u[c])&&(a=t.call(o,o.__data__,c,u))&&("__data__"in o&&(a.__data__=o.__data__),s[c]=a);return new je(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=se(t));for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var a,u=n[o],l=u.length,s=0;s<l;++s)(a=u[s])&&(r.push(t.call(a,a.__data__,s,u)),i.push(a));return new je(r,i)},filter:function(t){"function"!=typeof t&&(t=ce(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],u=a.length,l=r[i]=[],s=0;s<u;++s)(o=a[s])&&t.call(o,o.__data__,s,a)&&l.push(o);return new je(r,this._parents)},data:function(t,n){if(!t)return p=new Array(this.size()),c=-1,this.each(function(t){p[++c]=t}),p;var e,r=n?ge:pe,i=this._parents,o=this._groups;"function"!=typeof t&&(e=t,t=function(){return e});for(var a=o.length,u=new Array(a),l=new Array(a),s=new Array(a),c=0;c<a;++c){var h=i[c],f=o[c],d=f.length,p=t.call(h,h&&h.__data__,c,i),g=p.length,m=l[c]=new Array(g),v=u[c]=new Array(g);r(h,f,m,v,s[c]=new Array(d),p,n);for(var _,y,w=0,b=0;w<g;++w)if(_=m[w]){for(b<=w&&(b=w+1);!(y=v[b])&&++b<g;);_._next=y||null}}return(u=new je(u,i))._enter=l,u._exit=s,u},enter:function(){return new je(this._enter||this._groups.map(he),this._parents)},exit:function(){return new je(this._exit||this._groups.map(he),this._parents)},join:function(t,n,e){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=n&&(i=n(i)),null==e?o.remove():e(o),r&&i?r.merge(i).order():i},merge:function(t){for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var l,s=n[u],c=e[u],h=s.length,f=a[u]=new Array(h),d=0;d<h;++d)(l=s[d]||c[d])&&(f[d]=l);for(;u<r;++u)a[u]=n[u];return new je(a,this._parents)},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,a=i[o];0<=--o;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=me);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,u=n[o],l=u.length,s=i[o]=new Array(l),c=0;c<l;++c)(a=u[c])&&(s[c]=a);s.sort(t)}return new je(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],a=0,u=o.length;a<u;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,n){var e=ie(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof n?e.local?function(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}:function(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttribute(n):this.setAttribute(n,t)}}:e.local?function(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}:function(t,n){return function(){this.setAttribute(t,n)}})(e,n))},style:function(t,n,e){return 1<arguments.length?this.each((null==n?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof n?function(n,e,r){return function(){var t=e.apply(this,arguments);null==t?this.style.removeProperty(n):this.style.setProperty(n,t,r)}}:function(t,n,e){return function(){this.style.setProperty(t,n,e)}})(t,n,null==e?"":e)):_e(this.node(),t)},property:function(t,n){return 1<arguments.length?this.each((null==n?function(t){return function(){delete this[t]}}:"function"==typeof n?function(n,e){return function(){var t=e.apply(this,arguments);null==t?delete this[n]:this[n]=t}}:function(t,n){return function(){this[t]=n}})(t,n)):this.node()[t]},classed:function(t,n){var e=ye(t+"");if(arguments.length<2){for(var r=we(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?function(t,n){return function(){(n.apply(this,arguments)?xe:Me)(this,t)}}:n?function(t){return function(){xe(this,t)}}:function(t){return function(){Me(this,t)}})(e,n))},text:function(t){return arguments.length?this.each(null==t?ke:("function"==typeof t?function(n){return function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Ce:("function"==typeof t?function(n){return function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(Ae)},lower:function(){return this.each(Te)},append:function(t){var n="function"==typeof t?t:oe(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function(t,n){var e="function"==typeof t?t:oe(t),r=null==n?Se:"function"==typeof n?n:ue(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(Ee)},clone:function(t){return this.select(t?Fe:Ne)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=(t+"").trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");return 0<=e&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}),a=o.length;if(!(arguments.length<2)){for(u=n?Oe:Pe,null==e&&(e=!1),r=0;r<a;++r)this.each(u(o[r],n,e));return this}var u=this.node().__on;if(u)for(var l,s=0,c=u.length;s<c;++s)for(r=0,l=u[s];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,n){return this.each(("function"==typeof n?function(t,n){return function(){return He(this,t,n.apply(this,arguments))}}:function(t,n){return function(){return He(this,t,n)}})(t,n))}};var Ve={value:function(){}};function Xe(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new We(r)}function We(t){this._=t}function $e(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function Ze(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=Ve,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}We.prototype=Xe.prototype={constructor:We,on:function(t,n){var e,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");if(0<=e&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})),a=-1,u=o.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++a<u;)if(e=(t=o[a]).type)i[e]=Ze(i[e],t.name,n);else if(null==n)for(e in i)i[e]=Ze(i[e],t.name,null);return this}for(;++a<u;)if((e=(t=o[a]).type)&&(e=$e(i[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new We(t)},call:function(t,n){if(0<(e=arguments.length-2))for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var Ge,Qe,Je=0,Ke=0,tr=0,nr=1e3,er=0,rr=0,ir=0,or="object"==typeof performance&&performance.now?performance:Date,ar="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ur(){return rr||(ar(lr),rr=or.now()+ir)}function lr(){rr=0}function sr(){this._call=this._time=this._next=null}function cr(t,n,e){var r=new sr;return r.restart(t,n,e),r}function hr(){rr=(er=or.now())+ir,Je=Ke=0;try{!function(){ur(),++Je;for(var t,n=Ge;n;)0<=(t=rr-n._time)&&n._call.call(null,t),n=n._next;--Je}()}finally{Je=0,function(){var t,n,e=Ge,r=1/0;for(;e;)e=e._call?(r>e._time&&(r=e._time),(t=e)._next):(n=e._next,e._next=null,t?t._next=n:Ge=n);Qe=t,dr(r)}(),rr=0}}function fr(){var t=or.now(),n=t-er;nr<n&&(ir-=n,er=t)}function dr(t){Je||(Ke&&(Ke=clearTimeout(Ke)),24<t-rr?(t<1/0&&(Ke=setTimeout(hr,t-or.now()-ir)),tr&&(tr=clearInterval(tr))):(tr||(er=or.now(),tr=setInterval(fr,nr)),Je=1,ar(hr)))}function pr(n,e,t){var r=new sr;return e=null==e?0:+e,r.restart(function(t){r.stop(),n(t+e)},e,t),r}sr.prototype=cr.prototype={constructor:sr,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?ur():+e)+(null==n?0:+n),this._next||Qe===this||(Qe?Qe._next=this:Ge=this,Qe=this),this._call=t,this._time=e,dr()},stop:function(){this._call&&(this._call=null,this._time=1/0,dr())}};var gr=Xe("start","end","cancel","interrupt"),mr=[],vr=0,_r=1,yr=2,wr=3,br=4,xr=5,Mr=6;function kr(t,n,e,r,i,o){var a=t.__transition;if(a){if(e in a)return}else t.__transition={};!function(o,a,u){var l,s=o.__transition;function c(t){var n,e,r,i;if(u.state!==_r)return f();for(n in s)if((i=s[n]).name===u.name){if(i.state===wr)return pr(c);i.state===br?(i.state=Mr,i.timer.stop(),i.on.call("interrupt",o,o.__data__,i.index,i.group),delete s[n]):+n<a&&(i.state=Mr,i.timer.stop(),i.on.call("cancel",o,o.__data__,i.index,i.group),delete s[n])}if(pr(function(){u.state===wr&&(u.state=br,u.timer.restart(h,u.delay,u.time),h(t))}),u.state=yr,u.on.call("start",o,o.__data__,u.index,u.group),u.state===yr){for(u.state=wr,l=new Array(r=u.tween.length),n=0,e=-1;n<r;++n)(i=u.tween[n].value.call(o,o.__data__,u.index,u.group))&&(l[++e]=i);l.length=e+1}}function h(t){for(var n=t<u.duration?u.ease.call(null,t/u.duration):(u.timer.restart(f),u.state=xr,1),e=-1,r=l.length;++e<r;)l[e].call(o,n);u.state===xr&&(u.on.call("end",o,o.__data__,u.index,u.group),f())}function f(){for(var t in u.state=Mr,u.timer.stop(),delete s[a],s)return;delete o.__transition}(s[a]=u).timer=cr(function(t){u.state=_r,u.timer.restart(c,u.delay,u.time),u.delay<=t&&c(t-u.delay)},0,u.time)}(t,e,{name:n,index:r,group:i,on:gr,tween:mr,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:vr})}function Cr(t,n){var e=Tr(t,n);if(e.state>vr)throw new Error("too late; already scheduled");return e}function Ar(t,n){var e=Tr(t,n);if(e.state>wr)throw new Error("too late; already running");return e}function Tr(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Sr(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function Er(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function Nr(){}var Fr=1/.7,zr="\\s*([+-]?\\d+)\\s*",Ur="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Lr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Dr=/^#([0-9a-f]{3})$/,Pr=/^#([0-9a-f]{6})$/,Or=new RegExp("^rgb\\("+[zr,zr,zr]+"\\)$"),Hr=new RegExp("^rgb\\("+[Lr,Lr,Lr]+"\\)$"),Yr=new RegExp("^rgba\\("+[zr,zr,zr,Ur]+"\\)$"),jr=new RegExp("^rgba\\("+[Lr,Lr,Lr,Ur]+"\\)$"),Rr=new RegExp("^hsl\\("+[Ur,Lr,Lr]+"\\)$"),qr=new RegExp("^hsla\\("+[Ur,Lr,Lr,Ur]+"\\)$"),Br={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ir(t){var n;return t=(t+"").trim().toLowerCase(),(n=Dr.exec(t))?new Zr((n=parseInt(n[1],16))>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):(n=Pr.exec(t))?Vr(parseInt(n[1],16)):(n=Or.exec(t))?new Zr(n[1],n[2],n[3],1):(n=Hr.exec(t))?new Zr(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=Yr.exec(t))?Xr(n[1],n[2],n[3],n[4]):(n=jr.exec(t))?Xr(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=Rr.exec(t))?Qr(n[1],n[2]/100,n[3]/100,1):(n=qr.exec(t))?Qr(n[1],n[2]/100,n[3]/100,n[4]):Br.hasOwnProperty(t)?Vr(Br[t]):"transparent"===t?new Zr(NaN,NaN,NaN,0):null}function Vr(t){return new Zr(t>>16&255,t>>8&255,255&t,1)}function Xr(t,n,e,r){return r<=0&&(t=n=e=NaN),new Zr(t,n,e,r)}function Wr(t){return t instanceof Nr||(t=Ir(t)),t?new Zr((t=t.rgb()).r,t.g,t.b,t.opacity):new Zr}function $r(t,n,e,r){return 1===arguments.length?Wr(t):new Zr(t,n,e,null==r?1:r)}function Zr(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function Gr(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Qr(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||1<=e?t=n=NaN:n<=0&&(t=NaN),new Kr(t,n,e,r)}function Jr(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof Kr)return new Kr(t.h,t.s,t.l,t.opacity);if(t instanceof Nr||(t=Ir(t)),!t)return new Kr;if(t instanceof Kr)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),a=NaN,u=o-i,l=(o+i)/2;return u?(a=n===o?(e-r)/u+6*(e<r):e===o?(r-n)/u+2:(n-e)/u+4,u/=l<.5?o+i:2-o-i,a*=60):u=0<l&&l<1?0:a,new Kr(a,u,l,t.opacity)}(t):new Kr(t,n,e,null==r?1:r)}function Kr(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function ti(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}Sr(Nr,Ir,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),Sr(Zr,$r,Er(Nr,{brighter:function(t){return t=null==t?Fr:Math.pow(Fr,t),new Zr(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Zr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+Gr(this.r)+Gr(this.g)+Gr(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),Sr(Kr,Jr,Er(Nr,{brighter:function(t){return t=null==t?Fr:Math.pow(Fr,t),new Kr(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Kr(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new Zr(ti(240<=t?t-240:t+120,i,r),ti(t,i,r),ti(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var ni=Math.PI/180,ei=180/Math.PI,ri=.96422,ii=1,oi=.82521,ai=4/29,ui=6/29,li=3*ui*ui,si=ui*ui*ui;function ci(t){if(t instanceof hi)return new hi(t.l,t.a,t.b,t.opacity);if(t instanceof mi){if(isNaN(t.h))return new hi(t.l,0,0,t.opacity);var n=t.h*ni;return new hi(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}t instanceof Zr||(t=Wr(t));var e,r,i=gi(t.r),o=gi(t.g),a=gi(t.b),u=fi((.2225045*i+.7168786*o+.0606169*a)/ii);return i===o&&o===a?e=r=u:(e=fi((.4360747*i+.3850649*o+.1430804*a)/ri),r=fi((.0139322*i+.0971045*o+.7141733*a)/oi)),new hi(116*u-16,500*(e-u),200*(u-r),t.opacity)}function hi(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function fi(t){return si<t?Math.pow(t,1/3):t/li+ai}function di(t){return ui<t?t*t*t:li*(t-ai)}function pi(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function gi(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function mi(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}Sr(hi,function(t,n,e,r){return 1===arguments.length?ci(t):new hi(t,n,e,null==r?1:r)},Er(Nr,{brighter:function(t){return new hi(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new hi(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return new Zr(pi(3.1338561*(n=ri*di(n))-1.6168667*(t=ii*di(t))-.4906146*(e=oi*di(e))),pi(-.9787684*n+1.9161415*t+.033454*e),pi(.0719453*n-.2289914*t+1.4052427*e),this.opacity)}})),Sr(mi,function(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof mi)return new mi(t.h,t.c,t.l,t.opacity);if(t instanceof hi||(t=ci(t)),0===t.a&&0===t.b)return new mi(NaN,0,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*ei;return new mi(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new mi(t,n,e,null==r?1:r)},Er(Nr,{brighter:function(t){return new mi(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new mi(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return ci(this).rgb()}}));var vi=1.78277,_i=-.29227,yi=-.90649,wi=1.97294,bi=wi*yi,xi=wi*vi,Mi=vi*_i- -.14861*yi;function ki(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Ci(t){return function(){return t}}function Ai(o){return 1==(o=+o)?Ti:function(t,n){return n-t?(e=t,r=n,i=o,e=Math.pow(e,i),r=Math.pow(r,i)-e,i=1/i,function(t){return Math.pow(e+t*r,i)}):Ci(isNaN(t)?n:t);var e,r,i}}function Ti(t,n){var e,r,i=n-t;return i?(e=t,r=i,function(t){return e+t*r}):Ci(isNaN(t)?n:t)}Sr(ki,function(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof ki)return new ki(t.h,t.s,t.l,t.opacity);t instanceof Zr||(t=Wr(t));var n=t.r/255,e=t.g/255,r=t.b/255,i=(Mi*r+bi*n-xi*e)/(Mi+bi-xi),o=r-i,a=(wi*(e-i)-_i*o)/yi,u=Math.sqrt(a*a+o*o)/(wi*i*(1-i)),l=u?Math.atan2(a,o)*ei-120:NaN;return new ki(l<0?l+360:l,u,i,t.opacity)}(t):new ki(t,n,e,null==r?1:r)},Er(Nr,{brighter:function(t){return t=null==t?Fr:Math.pow(Fr,t),new ki(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ki(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*ni,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new Zr(255*(n+e*(-.14861*r+vi*i)),255*(n+e*(_i*r+yi*i)),255*(n+e*(wi*r)),this.opacity)}}));var Si=function t(n){var a=Ai(n);function e(n,t){var e=a((n=$r(n)).r,(t=$r(t)).r),r=a(n.g,t.g),i=a(n.b,t.b),o=Ti(n.opacity,t.opacity);return function(t){return n.r=e(t),n.g=r(t),n.b=i(t),n.opacity=o(t),n+""}}return e.gamma=t,e}(1);function Ei(n,e){return e-=n=+n,function(t){return n+e*t}}var Ni=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fi=new RegExp(Ni.source,"g");function zi(t,r){var n,e,i,o,a,u=Ni.lastIndex=Fi.lastIndex=0,l=-1,s=[],c=[];for(t+="",r+="";(n=Ni.exec(t))&&(e=Fi.exec(r));)(i=e.index)>u&&(i=r.slice(u,i),s[l]?s[l]+=i:s[++l]=i),(n=n[0])===(e=e[0])?s[l]?s[l]+=e:s[++l]=e:(s[++l]=null,c.push({i:l,x:Ei(n,e)})),u=Fi.lastIndex;return u<r.length&&(i=r.slice(u),s[l]?s[l]+=i:s[++l]=i),s.length<2?c[0]?(a=c[0].x,function(t){return a(t)+""}):(o=r,function(){return o}):(r=c.length,function(t){for(var n,e=0;e<r;++e)s[(n=c[e]).i]=n.x(t);return s.join("")})}function Ui(t,n){var e,r=typeof n;return null==n||"boolean"===r?Ci(n):("number"===r?Ei:"string"===r?(e=Ir(n))?(n=e,Si):zi:n instanceof Ir?Si:n instanceof Date?function(n,e){var r=new Date;return e-=n=+n,function(t){return r.setTime(n+e*t),r}}:Array.isArray(n)?function(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(e=0;e<i;++e)o[e]=Ui(t[e],n[e]);for(;e<r;++e)a[e]=n[e];return function(t){for(e=0;e<i;++e)a[e]=o[e](t);return a}}:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?function(t,n){var e,r={},i={};for(e in null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={}),n)e in t?r[e]=Ui(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}}:Ei)(t,n)}function Li(n,e){return e-=n=+n,function(t){return Math.round(n+e*t)}}var Di,Pi,Oi,Hi,Yi=180/Math.PI,ji={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ri(t,n,e,r,i,o){var a,u,l;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(l=t*e+n*r)&&(e-=t*l,r-=n*l),(u=Math.sqrt(e*e+r*r))&&(e/=u,r/=u,l/=u),t*r<n*e&&(t=-t,n=-n,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*Yi,skewX:Math.atan(l)*Yi,scaleX:a,scaleY:u}}function qi(f,d,p,g){function m(t){return t.length?t.pop()+" ":""}return function(t,n){var e,r,i,o,a,u,l,s,c=[],h=[];return t=f(t),n=f(n),function(t,n,e,r,i,o){if(t!==e||n!==r){var a=i.push("translate(",null,d,null,p);o.push({i:a-4,x:Ei(t,e)},{i:a-2,x:Ei(n,r)})}else(e||r)&&i.push("translate("+e+d+r+p)}(t.translateX,t.translateY,n.translateX,n.translateY,c,h),e=t.rotate,r=n.rotate,i=c,o=h,e!==r?(180<e-r?r+=360:180<r-e&&(e+=360),o.push({i:i.push(m(i)+"rotate(",null,g)-2,x:Ei(e,r)})):r&&i.push(m(i)+"rotate("+r+g),a=t.skewX,u=n.skewX,l=c,s=h,a!==u?s.push({i:l.push(m(l)+"skewX(",null,g)-2,x:Ei(a,u)}):u&&l.push(m(l)+"skewX("+u+g),function(t,n,e,r,i,o){if(t!==e||n!==r){var a=i.push(m(i)+"scale(",null,",",null,")");o.push({i:a-4,x:Ei(t,e)},{i:a-2,x:Ei(n,r)})}else 1===e&&1===r||i.push(m(i)+"scale("+e+","+r+")")}(t.scaleX,t.scaleY,n.scaleX,n.scaleY,c,h),t=n=null,function(t){for(var n,e=-1,r=h.length;++e<r;)c[(n=h[e]).i]=n.x(t);return c.join("")}}}var Bi=qi(function(t){return"none"===t?ji:(Di||(Di=document.createElement("DIV"),Pi=document.documentElement,Oi=document.defaultView),Di.style.transform=t,t=Oi.getComputedStyle(Pi.appendChild(Di),null).getPropertyValue("transform"),Pi.removeChild(Di),Ri(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),Ii=qi(function(t){return null==t?ji:(Hi||(Hi=document.createElementNS("http://www.w3.org/2000/svg","g")),Hi.setAttribute("transform",t),(t=Hi.transform.baseVal.consolidate())?Ri((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):ji)},", ",")",")");Math.SQRT2;function Vi(t,n,e){var r=t._id;return t.each(function(){var t=Ar(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)}),function(t){return Tr(t,r).value[n]}}function Xi(t,n){var e;return("number"==typeof n?Ei:n instanceof Ir?Si:(e=Ir(n))?(n=e,Si):zi)(t,n)}var Wi=Re.prototype.constructor;function $i(t){return function(){this.style.removeProperty(t)}}var Zi=0;function Gi(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function Qi(){return++Zi}var Ji=Re.prototype;Gi.prototype=function(t){return Re().transition(t)}.prototype={constructor:Gi,select:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=ue(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var u,l,s=r[a],c=s.length,h=o[a]=new Array(c),f=0;f<c;++f)(u=s[f])&&(l=t.call(u,u.__data__,f,s))&&("__data__"in u&&(l.__data__=u.__data__),h[f]=l,kr(h[f],n,e,f,h,Tr(u,e)));return new Gi(o,this._parents,n,e)},selectAll:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=se(t));for(var r=this._groups,i=r.length,o=[],a=[],u=0;u<i;++u)for(var l,s=r[u],c=s.length,h=0;h<c;++h)if(l=s[h]){for(var f,d=t.call(l,l.__data__,h,s),p=Tr(l,e),g=0,m=d.length;g<m;++g)(f=d[g])&&kr(f,n,e,g,d,p);o.push(d),a.push(l)}return new Gi(o,a,n,e)},filter:function(t){"function"!=typeof t&&(t=ce(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],u=a.length,l=r[i]=[],s=0;s<u;++s)(o=a[s])&&t.call(o,o.__data__,s,a)&&l.push(o);return new Gi(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var l,s=n[u],c=e[u],h=s.length,f=a[u]=new Array(h),d=0;d<h;++d)(l=s[d]||c[d])&&(f[d]=l);for(;u<r;++u)a[u]=n[u];return new Gi(a,this._parents,this._name,this._id)},selection:function(){return new Wi(this._groups,this._parents)},transition:function(){for(var t=this._name,n=this._id,e=Qi(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],l=u.length,s=0;s<l;++s)if(a=u[s]){var c=Tr(a,n);kr(a,t,e,s,u,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Gi(r,this._parents,t,e)},call:Ji.call,nodes:Ji.nodes,node:Ji.node,size:Ji.size,empty:Ji.empty,each:Ji.each,on:function(t,n){var e,r,i,o,a,u,l=this._id;return arguments.length<2?Tr(this.node(),l).on.on(t):this.each((e=l,i=n,u=((r=t)+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return 0<=n&&(t=t.slice(0,n)),!t||"start"===t})?Cr:Ar,function(){var t=u(this,e),n=t.on;n!==o&&(a=(o=n).copy()).on(r,i),t.on=a}))},attr:function(t,n){var e=ie(t),r="transform"===e?Ii:Xi;return this.attrTween(t,"function"==typeof n?(e.local?function(r,i,o){var a,u,l;return function(){var t,n,e=o(this);if(null!=e)return(t=this.getAttributeNS(r.space,r.local))===(n=e+"")?null:t===a&&n===u?l:(u=n,l=i(a=t,e));this.removeAttributeNS(r.space,r.local)}}:function(r,i,o){var a,u,l;return function(){var t,n,e=o(this);if(null!=e)return(t=this.getAttribute(r))===(n=e+"")?null:t===a&&n===u?l:(u=n,l=i(a=t,e));this.removeAttribute(r)}})(e,r,Vi(this,"attr."+t,n)):null==n?(e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(e):(e.local?function(n,e,r){var i,o,a=r+"";return function(){var t=this.getAttributeNS(n.space,n.local);return t===a?null:t===i?o:o=e(i=t,r)}}:function(n,e,r){var i,o,a=r+"";return function(){var t=this.getAttribute(n);return t===a?null:t===i?o:o=e(i=t,r)}})(e,r,n))},attrTween:function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=ie(t);return this.tween(e,(r.local?function(r,i){var o,a;function t(){var n,e,t=i.apply(this,arguments);return t!==a&&(o=(a=t)&&(n=r,e=t,function(t){this.setAttributeNS(n.space,n.local,e(t))})),o}return t._value=i,t}:function(r,i){var o,a;function t(){var n,e,t=i.apply(this,arguments);return t!==a&&(o=(a=t)&&(n=r,e=t,function(t){this.setAttribute(n,e(t))})),o}return t._value=i,t})(r,n))},style:function(t,n,e){var r,i,o,a,u,l,s,c,h,f,d,p,g,m,v,_,y,w,b,x,M,k,C,A,T,S="transform"==(t+="")?Bi:Xi;return null==n?this.styleTween(t,(M=t,k=S,function(){var t=_e(this,M),n=(this.style.removeProperty(M),_e(this,M));return t===n?null:t===C&&n===A?T:T=k(C=t,A=n)})).on("end.style."+t,$i(t)):"function"==typeof n?this.styleTween(t,(v=t,_=S,y=Vi(this,"style."+t,n),function(){var t=_e(this,v),n=y(this),e=n+"";return null==n&&(this.style.removeProperty(v),e=n=_e(this,v)),t===e?null:t===w&&e===b?x:(b=e,x=_(w=t,n))})).each((s=this._id,m="end."+(g="style."+(c=t)),function(){var t=Ar(this,s),n=t.on,e=null==t.value[g]?p||(p=$i(c)):void 0;n===h&&d===e||(f=(h=n).copy()).on(m,d=e),t.on=f})):this.styleTween(t,(r=t,i=S,o=n,l=o+"",function(){var t=_e(this,r);return t===l?null:t===a?u:u=i(a=t,o)}),e).on("end.style."+t,null)},styleTween:function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,function(i,o,a){var u,l;function t(){var n,e,r,t=o.apply(this,arguments);return t!==l&&(u=(l=t)&&(n=i,e=t,r=a,function(t){this.style.setProperty(n,e(t),r)})),u}return t._value=o,t}(t,n,null==e?"":e))},text:function(t){return this.tween("text","function"==typeof t?(e=Vi(this,"text",t),function(){var t=e(this);this.textContent=null==t?"":t}):(n=null==t?"":t+"",function(){this.textContent=n}));var n,e},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,i=Tr(this.node(),e).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==n?function(i,o){var a,u;return function(){var t=Ar(this,i),n=t.tween;if(n!==a)for(var e=0,r=(u=a=n).length;e<r;++e)if(u[e].name===o){(u=u.slice()).splice(e,1);break}t.tween=u}}:function(o,a,u){var l,s;if("function"!=typeof u)throw new Error;return function(){var t=Ar(this,o),n=t.tween;if(n!==l){s=(l=n).slice();for(var e={name:a,value:u},r=0,i=s.length;r<i;++r)if(s[r].name===a){s[r]=e;break}r===i&&s.push(e)}t.tween=s}})(e,t,n))},delay:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?function(t,n){return function(){Cr(this,t).delay=+n.apply(this,arguments)}}:function(t,n){return n=+n,function(){Cr(this,t).delay=n}})(n,t)):Tr(this.node(),n).delay},duration:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?function(t,n){return function(){Ar(this,t).duration=+n.apply(this,arguments)}}:function(t,n){return n=+n,function(){Ar(this,t).duration=n}})(n,t)):Tr(this.node(),n).duration},ease:function(t){var n=this._id;return arguments.length?this.each(function(t,n){if("function"!=typeof n)throw new Error;return function(){Ar(this,t).ease=n}}(n,t)):Tr(this.node(),n).ease},end:function(){var i,o,a=this,u=a._id,l=a.size();return new Promise(function(t,n){var e={value:n},r={value:function(){0==--l&&t()}};a.each(function(){var t=Ar(this,u),n=t.on;n!==i&&((o=(i=n).copy())._.cancel.push(e),o._.interrupt.push(e),o._.end.push(r)),t.on=o})})}};Math.PI,Math.PI;var Ki={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function to(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))return Ki.time=ur(),Ki;return e}Re.prototype.interrupt=function(t){return this.each(function(){!function(t,n){var e,r,i,o=t.__transition,a=!0;if(o){for(i in n=null==n?null:n+"",o)(e=o[i]).name===n?(r=e.state>yr&&e.state<xr,e.state=Mr,e.timer.stop(),e.on.call(r?"interrupt":"cancel",t,t.__data__,e.index,e.group),delete o[i]):a=!1;a&&delete t.__transition}}(this,t)})},Re.prototype.transition=function(t){var n,e;t=t instanceof Gi?(n=t._id,t._name):(n=Qi(),(e=Ki).time=ur(),null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],l=u.length,s=0;s<l;++s)(a=u[s])&&kr(a,t,n,s,u,e||to(a,n));return new Gi(r,this._parents,t,n)};var no=Object.freeze({transform_labels:!1,transform:"multiply",multiply_divide_constant:1,exponentiate_constant:0,multiplier:1,prefix:"",n_dec:2,suffix:"",strip_zeros:!0,strip_separator:!0});function eo(i,t){var n,e,o=0<=i.n_dec?Math.floor(i.n_dec):Math.ceil(i.n_dec),a=t(",."+(0<o?o:"0")+"f"),r=t.decimal,u=t.thousands,l=i.strip_zeros&&0<o?new RegExp("\\"+r+"?0+$"):null,s=i.strip_separator&&u,c=(e=1,(n=i).transform_labels&&(e="multiply"===n.transform?n.multiply_divide_constant:"divide"===n.transform?1/n.multiply_divide_constant:Math.pow(10,n.exponentiate_constant)),function(t){return t*e});return o<0?function(t){var n=function(t,n){if(!n)return Math.round(t);n=0<n?Math.floor(n):Math.ceil(n);var e=Math.pow(10,n);return Math.round(t*e)/e}(c(t),o),e=s&&1e3<=n&&n<1e4,r=a(n);return e&&(r=r.replace(u,"")),i.prefix+r+i.suffix}:function(t){var n=c(t),e=s&&u&&1e3<=n&&n<1e4,r=a(n);return l&&(r=r.replace(l,"")),e&&(r=r.replace(u,"")),i.prefix+r+i.suffix}}var ro,io,oo,ao,uo,lo,so,co={};function ho(t,n){co[t]=gn[t]=n,zn.hide()}function fo(){if(gn.rotation_x==co.rotation_x&&gn.rotation_y==co.rotation_y){if(lo!==gn.auto_rotate&&(lo=gn.auto_rotate,uo=ao=null),io===gn.default_lon&&oo===gn.default_lat||(io=gn.default_lon,oo=gn.default_lat,lo||ro.rotateTo(io*Math.PI/180,oo*Math.PI/180)),lo){var t=[],n=Yn;t=n.single_src&&!n.single_dst?Hn[n.single_src].coords:n.single_dst&&!n.single_src?Hn[n.single_dst].coords:gn.highlighted_arrow?ro.midPoint(mo(gn.highlighted_arrow)):n[0]?ro.midPoint(Yn[0].src_location,Yn[0].dst_location):[io,oo],ao===t[0]&&uo===t[1]||(ao=t[0],uo=t[1],ro.rotateTo(ao*Math.PI/180,uo*Math.PI/180))}}else ro.rotateTo(gn.rotation_x,gn.rotation_y)}function po(){var t;ro.setTextureUrl((t="custom"==gn.globe_skin?gn.globe_skin_other:gn.globe_skin)?t.match(/^https?:/)?t:Flourish.static_prefix+"/"+t:""),ro.setArrowScale(gn.arrow_scale),ro.setArrowColor(go(gn.arrow_colour)),ro.setArrowHighlightColor(go(gn.selected_colour)),null!==gn.distance&&ro.zoomTo(gn.distance),function(t){var n={};if(t.length){var e="all"===gn.arrow_scale_reference?Qn:t[0].value;t.forEach(function(t){n[t.route]={src:t.src_location,dst:t.dst_location,score:t.value/e*10}})}ro.updateArrows(n),vo(gn.highlighted_arrow)}(Yn)}function go(t){var n=$r(t);return[n.r/255,n.g/255,n.b/255]}function mo(n){var e;return Yn.some(function(t){if(t.route===n)return e=t,!0}),e}function vo(t,n){var e;t?(e=mo(t))&&(ro.highlightArrow(e.route),n&&zn.point(n[0],n[1]).draw(e,function(t){var n=t.querySelector("[data-binding='value']");n&&e.display_value&&(n.innerHTML=Mo(e.display_value))})):(ro.highlightArrow(),zn.hide()),Ie("#top-countries .country-name").style("color",function(t){return e&&t.route===e.route?gn.selected_colour:null})}function _o(){gn.highlighted_arrow?(gn.highlighted_arrow=null,vo()):bo(Be(this),!0)}function yo(){gn.highlighted_arrow||bo(Be(this))}function wo(){var t=t(this);1===t.length&&bo(t[0])}function bo(t,n){var e=ro.arrowAtCoordinate(t[0],t[1]);vo(e||void 0,t),n&&(gn.highlighted_arrow=e)}var xo,Mo,ko,Co,Ao=7;function To(){Mo=xo(Vn.getFormatterFunction()),so=(window.innerWidth<500?11:16)+Ao,qe("#top-countries").transition().duration(500).style("height",gn.num_results*so+"px");var t=Math.max(gn.num_results,0),n=t?Yn.slice(0,t):[],a=null;n.length&&(Yn.single_src?a=Yn.single_dst?null:"src":Yn.single_dst&&(a="dst"));var e="";gn.leaderboard_country_header&&a&&(e="src"===a?Hn[Yn.single_src].name+" "+gn.leaderboard_to_text:Hn[Yn.single_dst].name+" "+gn.leaderboard_from_text),qe("#top-countries-header").text(e).style("height",so+"px");var r=qe("#top-countries").selectAll(".rank-number").data(n);r.enter().append("div").attr("class","rank-number"),Ie(".rank-number").style("top",function(t,n){return n*so+"px"}).text(function(t,n){return n+1}),r.exit().remove();var i=qe("#top-countries").selectAll(".country-name").data(n,function(t){return t.route});i.enter().append("div").attr("class","country-name").style("top",gn.num_results*so+"px").style("opacity",0).on("click",function(){var t=qe(this).datum().route;zn.hide(),gn.highlighted_arrow===t?(gn.highlighted_arrow=null,vo()):vo(gn.highlighted_arrow=t)}).on("mouseover",function(){gn.highlighted_arrow||vo(qe(this).datum().route)}).on("mouseout",function(){gn.highlighted_arrow||vo()}).merge(i).html(function(t){var n=document.createElement("p");if("src"===a)n.textContent=t.dst_name;else if("dst"===a)n.textContent=t.src_name;else{var e=document.createTextNode(t.src_name+" ");n.appendChild(e);var r=document.createElement("span");r.textContent="→",r.classList.add("arrow"),n.appendChild(r);var i=document.createTextNode(" "+t.dst_name);n.appendChild(i)}var o=document.createElement("span");return n.appendChild(document.createTextNode(" ")),o.textContent=t.display_value?Mo(t.display_value):"",o.classList.add("value"),n.appendChild(o),n.innerHTML}).transition().duration(750).delay(300).style("opacity",1).style("top",function(t,n){return n*so+"px"}),i.selectAll("span.value").style("color",gn.accent_colour),i.exit().transition().duration(750).delay(300).style("top",gn.num_results*so+"px").style("opacity",0).remove()}Vn=pn(gn.localization),xo=function(n){for(var t in no)void 0===n[t]&&(n[t]=no[t]);return function(t){return eo(n,t)}}(gn.label_format),ko=document.body,Co=gn.popup,zn=new Pn(ko,Co,"<h1>{{src_name}} → {{dst_name}}</h1><p data-binding='value'>{{display_value}}</p>");var So=".controls-container {\tdisplay: inline-block;}.controls-container, .controls-container * {\tbox-sizing: border-box;\ttext-align: left;\tvertical-align: bottom;}.button-container .button, .dropdown .current {\toverflow: hidden;\ttext-overflow: ellipsis;\theight: 100%;\twhite-space: nowrap;\ttext-align: left;\tfont-size: 12px;\tline-height: 21px;}.button-container .button, .dropdown .current, .dropdown .list .list-item {\twhite-space: nowrap;}.slider, .slider-play {\tpointer-events: all;\tvertical-align: bottom}.button {\tdisplay: inline-block;\tcursor: pointer}.button:hover {\topacity: .5}.button.selected, .button.selected:hover {\tcolor: #fff;\tcursor: default;\topacity: 1;\tbackground-image: linear-gradient(transparent, rgba(0, 0, 0, .05) 40%, rgba(0, 0, 0, .1))}.button-container {\tpointer-events: all;\twidth: auto;\tline-height: 0;\tmargin-bottom: 18px;\twidth: 100%;\ttext-align: center;}.button-container.button-group {\tdisplay: table;\tborder: 1px solid #ccc;\twidth: 100%;\ttable-layout: fixed;\tborder-radius: 3px;\tmargin-bottom: 20px;\toverflow: hidden;}.button-container .button {\tfont-size: 12px;\tborder: 1px solid #ccc;\tbackground: #fff;\tpadding: 0.1em 0.6em 0;\tcolor: #333;\tfont-weight: 400;\ttext-align: center;\theight: 24px;\tborder-radius: 3px;\tmargin: 0 1px 2px;}.button-container.button-group .button {\tborder: none;\tborder-left: 1px solid #ccc;\tborder-radius: 0;\tdisplay: table-cell;\ttext-align: center;\tvertical-align: middle;\tmargin: 0;\theight: 22px;}.button-container .button:hover {\tbackground: #eee;\topacity: .8}.button-container.button-group .button:first-child {\tborder: none}.button-container .button.selected, .button-container .button.selected:hover {\topacity: 1;\tbackground: #ececec;\tcolor: #333}.dropdown {\tpointer-events: all;\tdisplay: inline-table;\tcolor: #333;\tfont-weight: 400;\tfont-size: 16px;\tposition: relative}.dropdown .heading {\tmargin-bottom: .4em;\tfont-weight: 300}.dropdown .main {\tbackground: #fff;\tpadding: 0 20px 0 6px;\tcursor: pointer;\tposition: relative;\tborder: 1px solid #ccc;\tborder-radius: 3px;\theight: 24px;\tline-height: 26px}.dropdown .list, .dropdown .symbol {\tposition: absolute}.dropdown .current {\theight: 100%;\twidth: 100%;\tdisplay: inline-block;\tvertical-align: top;\tpadding: 0.1em 0 0;}.dropdown .symbol {\twidth: 30px;\theight: 100%;\tright: 0;\ttop: 0;\tbackground: 80% 40% no-repeat;\tbackground-size: auto 50%;\tdisplay: inline-block}.dropdown .list {\ttop: 100%;\tleft: 2px;\tmin-width: calc(100% - 4px);\tbackground: rgba(255, 255, 255, 1);\tpadding: 0 2px;\ttext-align: left;\tdisplay: none;\tline-height: 1.4em;\tmax-height: 160px;\toverflow-y: scroll;\tcolor: #333;\tbox-shadow: 0 1px 2px rgba(0, 0, 0, .2)}.dropdown .list .list-item {\tfont-size: 12px;\theight: 24px;\tpadding: 0 5px}.dropdown .list .list-item:hover {\tcursor: pointer;\tbackground: #eee}.dropdown.open .list {\tdisplay: block;\tz-index: 1}.dropdown .list .list-item.selected, .dropdown .list .list-item.selected:hover {\tcolor: #57c1fc;\tcursor: default;\topacity: 1}.dropdown .list .list-item.header, .dropdown .list .list-item.header:hover {\tfont-size: .66em;\tletter-spacing: 1px;\ttext-transform: uppercase;\tcolor: #888;\topacity: 1;\tcursor: default;\tfont-weight: 300;\tmargin-top: .5em}.dropdown .list .list-item.header:first-child {\tmargin-top: 0}.controls-container .dropdown {\tmargin: 0 0 20px;}.controls-container .dropdown .heading {\tcolor: #333}.slider-holder {\tmargin-bottom: 20px}.slider-play {\twidth: 24px;\theight: 24px;\tbackground-repeat: no-repeat;\tbackground-size: 100% 100%;\tbackground-position: center;\tcursor: pointer;\tdisplay: none;\tmargin-right: 2px}.slider, .slider-holder.animatable .slider-play {\tdisplay: inline-block}.slider-play:hover {\topacity: .7}.slider {\theight: 46px;\twidth: 100%;\tbottom: 0}.slider-holder.animatable .slider {\twidth: calc(100% - 37px)}.slider-holder.playing .slider {\tpointer-events: none}.slider .tick line {\tstroke: #333}.slider text {\tfill: #333}.slider .slider-end-labels {\tfont-size: 11px;\tfill: #9e9e9e}@media(min-width:520px) {\t.dropdown .main {\t\theight: 30px;\t}\t.slider-play {\t\twidth: 30px;\t\theight: 30px\t}\t.button-container .button, .dropdown .current {\t\tfont-size: 14px;\t\tline-height: 26px;\t\theight: 30px;\t}\t.button-container.button-group .button {\t\theight: 28px;\t}\t.dropdown .list .list-item {\t\theight: 30px;\t\tfont-size: 14px;\t\tline-height: 27px;\t}}";function Eo(t){return"url('data:image/svg+xml;base64,"+window.btoa(t)+"')"}var No=!1;var Fo=Object.freeze(["auto-buttons","grouped-buttons","floating-buttons","dropdown","slider","none"]);function zo(t){!function(t){if(!No&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",n.appendChild(e),e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),No=!0}}(So);var e={},r={slider_step_time:2,slider_loop:!0,slider_loop_pause:0,slider_play_button:!0,slider_handle_colour:"#333",slider_label:!0,dropdown_icon_colour:"#333333"};Object.keys(r).forEach(function(n){var t=n.replace(/_\w/g,function(t){return t.charAt(1).toUpperCase()});e[t]=function(t){return void 0===t?r[n]:(r[n]=t,e)}}),r.type="auto_buttons",e.type=function(t){return void 0===t?r.type:(r.type=-1!==Fo.indexOf(t)?t:"auto-buttons",e)},Object.defineProperty(r,"control",{get:function(){var t=r.type;return"dropdown"===t||"slider"===t||"none"===t?r.type:"buttons"},set:function(){console.warn("Nothing changed: control is read only")}}),Object.defineProperty(r,"buttons_type",{get:function(){if("buttons"===r.control)return"auto-buttons"===r.type?"auto":"grouped-buttons"===r.type?"grouped":"floating"},set:function(){console.warn("Nothing changed: button_type is read only")}}),r.index=0,e.index=function(t){if(void 0===t)return r.n_options?r.index:null;if(null!==t){if("number"!=typeof(n=t)||!isFinite(n))throw TypeError("index must be a number greater than or equal to 0.");if(t<0)throw RangeError("index must be greater than or equal to 0.");r.index=Math.floor(t)}var n;return e},r.options=[],Object.defineProperty(r,"n_options",{get:function(){return r.options.length},set:function(){console.warn("Nothing changed: n_options is read only")}}),e.options=function(t){if(void 0===t)return r.options.slice();if(!Array.isArray(t))throw TypeError("opts must be an array.");return r.options=Object.freeze(t.slice()),e},Object.defineProperty(r,"value",{get:function(){return r.n_options?r.options[r.index]:null},set:function(){console.warn("Nothing changed: value is read only")}}),e.value=function(t){if(void 0===t)return r.value;if(null!==t){var n=r.options.indexOf(t);-1!==n?r.index=n:console.warn("Nothing changed: value not in options list")}return e},Object.defineProperty(r,"width",{get:function(){return o.getBoundingClientRect().width+"px"},set:function(){console.warn("Nothing changed: width is read only")}}),r.changeHandlers=[],e.on=function(t,n){return"change"===t&&r.changeHandlers.push(n.bind(e)),e};Object.seal(r);var n,i=qe(t);n=!i.classed("controls-container")&&(i.classed("controls-container",!0),!0);var o=i.node();return e.container=i,{output_obj:e,props:r,onChangeCallbacks:function(){var n=r.value,e=r.index;r.changeHandlers.forEach(function(t){t(n,e)})},container:i,container_node:o,container_selector:t,added_class:n}}function Uo(t){var n=t.container,e=t.props,r=t.onChangeCallbacks,i=n.append("div").attr("class","dropdown"),o=i.append("div").attr("class","main"),a=o.append("span").attr("class","current"),u=o.append("span").attr("class","symbol"),l=i.append("div").attr("class","list"),s=function(){i.classed("open",!1)},c=i.node();document.querySelector("body").addEventListener("click",function(t){if(i.classed("open")){for(var n=t.target,e=n.parentElement;e;){if(n===c)return;e=(n=e).parentElement}s()}},!1),o.on("click",function(){i.classed("open",!i.classed("open"))});var h,f=function(){h!==e.dropdown_icon_colour&&(h=e.dropdown_icon_colour,u.style("background-image",Eo('<svg width="6px" height="12px" viewBox="0 0 6 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g transform="translate(-442.000000, -44.000000)" fill="'+h+'"> <g id="Group" transform="translate(442.000000, 44.000000)"> <polygon id="Triangle-2" points="3 0 6 5 0 5"></polygon> <polygon id="Triangle-2-Copy" points="3 12 0 7 6 7"></polygon> </g> </g> </svg>')))},d={handle:i};return d.show=function(){return f(),i.style("width",e.width).style("display","inline-table"),i.select(".main").style("width",e.width),d},d.hide=function(){return s(),i.style("display","none"),d},d.setValue=function(){return a.text(e.value).attr("title",e.value),d},d.setOptions=function(){return l.text("").selectAll(".list-item").data(e.options).enter().append("div").attr("class","list-item").text(function(t){return t}).on("click",function(t,n){s(),qe(this).classed("selected")||(e.index=n,r())}),d},d.remove=function(){return i.remove(),d},d}function Lo(t,n){var e,r,i=t.container,o=t.props,a=t.onChangeCallbacks,u=i.append("div").attr("class","button-container"),l=function(){u.style("display","none")},s={handle:u};return s.show=function(){return"floating"===o.buttons_type?u.style("width",null).style("display","inline-block").classed("button-group",!1):(u.style("width",o.width).style("display","table").classed("button-group",!0),"auto"===o.buttons_type&&(r.every(function(t){return t.offsetWidth>=t.scrollWidth})||(l(),n.show()))),s},s.hide=function(){return l(),s},s.setValue=function(){return e&&e.each(function(t,n){qe(this).classed("selected",n===o.index)}),s},s.setOptions=function(){return e=u.text("").selectAll(".button").data(o.options).enter().append("div").attr("class","button").classed("selected",function(t,n){return n===o.index}).text(function(t){return t}).attr("title",function(t){return t}).on("click",function(t,n){n!==o.index&&(o.index=n,a())}),r=e.nodes(),s},s.remove=function(){return u.remove(),s},s}var Do=Array.prototype.slice;function Po(t){return t}var Oo=1,Ho=2,Yo=3,jo=4,Ro=1e-6;function qo(t){return"translate("+(t+.5)+",0)"}function Bo(t){return"translate(0,"+(t+.5)+")"}function Io(){return!this.__axis}function Vo(g,m){var v=[],_=null,y=null,w=6,b=6,x=3,M=g===Oo||g===jo?-1:1,k=g===jo||g===Ho?"x":"y",C=g===Oo||g===Yo?qo:Bo;function n(t){var n=null==_?m.ticks?m.ticks.apply(m,v):m.domain():_,e=null==y?m.tickFormat?m.tickFormat.apply(m,v):Po:y,r=Math.max(w,0)+x,i=m.range(),o=+i[0]+.5,a=+i[i.length-1]+.5,u=(m.bandwidth?function(n){var e=Math.max(0,n.bandwidth()-1)/2;return n.round()&&(e=Math.round(e)),function(t){return+n(t)+e}}:function(n){return function(t){return+n(t)}})(m.copy()),l=t.selection?t.selection():t,s=l.selectAll(".domain").data([null]),c=l.selectAll(".tick").data(n,m).order(),h=c.exit(),f=c.enter().append("g").attr("class","tick"),d=c.select("line"),p=c.select("text");s=s.merge(s.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),c=c.merge(f),d=d.merge(f.append("line").attr("stroke","currentColor").attr(k+"2",M*w)),p=p.merge(f.append("text").attr("fill","currentColor").attr(k,M*r).attr("dy",g===Oo?"0em":g===Yo?"0.71em":"0.32em")),t!==l&&(s=s.transition(t),c=c.transition(t),d=d.transition(t),p=p.transition(t),h=h.transition(t).attr("opacity",Ro).attr("transform",function(t){return isFinite(t=u(t))?C(t):this.getAttribute("transform")}),f.attr("opacity",Ro).attr("transform",function(t){var n=this.parentNode.__axis;return C(n&&isFinite(n=n(t))?n:u(t))})),h.remove(),s.attr("d",g===jo||g==Ho?b?"M"+M*b+","+o+"H0.5V"+a+"H"+M*b:"M0.5,"+o+"V"+a:b?"M"+o+","+M*b+"V0.5H"+a+"V"+M*b:"M"+o+",0.5H"+a),c.attr("opacity",1).attr("transform",function(t){return C(u(t))}),d.attr(k+"2",M*w),p.attr(k,M*r).text(e),l.filter(Io).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",g===Ho?"start":g===jo?"end":"middle"),l.each(function(){this.__axis=u})}return n.scale=function(t){return arguments.length?(m=t,n):m},n.ticks=function(){return v=Do.call(arguments),n},n.tickArguments=function(t){return arguments.length?(v=null==t?[]:Do.call(t),n):v.slice()},n.tickValues=function(t){return arguments.length?(_=null==t?null:Do.call(t),n):_&&_.slice()},n.tickFormat=function(t){return arguments.length?(y=t,n):y},n.tickSize=function(t){return arguments.length?(w=b=+t,n):w},n.tickSizeInner=function(t){return arguments.length?(w=+t,n):w},n.tickSizeOuter=function(t){return arguments.length?(b=+t,n):b},n.tickPadding=function(t){return arguments.length?(x=+t,n):x},n}var Xo=Array.prototype,Wo=Xo.map,$o=Xo.slice;function Zo(t){return+t}var Go=[0,1];function Qo(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:(t=e,function(){return t});var t}function Jo(t,n,e,r){var i=t[0],o=t[1],a=n[0],u=n[1];return a=o<i?(i=e(o,i),r(u,a)):(i=e(i,o),r(a,u)),function(t){return a(i(t))}}function Ko(e,t,n,r){var i=Math.min(e.length,t.length)-1,o=new Array(i),a=new Array(i),u=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++u<i;)o[u]=n(e[u],e[u+1]),a[u]=r(t[u],t[u+1]);return function(t){var n=l(e,t,1,i)-1;return a[n](o[n](t))}}function ta(t,n,e){var r,i,o,a,u,l,s,c,h,f,d,p,g=t[0],m=t[t.length-1],v=(i=g,o=m,a=null==n?10:n,u=Math.abs(o-i)/Math.max(0,a),l=Math.pow(10,Math.floor(Math.log(u)/Math.LN10)),y<=(s=u/l)?l*=10:w<=s?l*=5:b<=s&&(l*=2),o<i?-l:l);switch((e=en(null==e?",f":e)).type){case"s":var _=Math.max(Math.abs(g),Math.abs(m));return null!=e.precision||isNaN((d=v,p=_,r=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Kt(p)/3)))-Kt(Math.abs(d)))))||(e.precision=r),cn(e,_);case"":case"e":case"g":case"p":case"r":null!=e.precision||isNaN((h=v,f=Math.max(Math.abs(g),Math.abs(m)),h=Math.abs(h),f=Math.abs(f)-h,r=Math.max(0,Kt(f)-Kt(h))+1))||(e.precision=r-("e"===e.type));break;case"f":case"%":null!=e.precision||isNaN((c=v,r=Math.max(0,-Kt(Math.abs(c)))))||(e.precision=r-2*("%"===e.type))}return sn(e)}function na(u){var l=u.domain;return u.ticks=function(t){var n=l();return function(t,n,e){var r,i,o,a,u=-1;if(e=+e,(t=+t)==(n=+n)&&0<e)return[t];if((r=n<t)&&(i=t,t=n,n=i),0===(a=s(t,n,e))||!isFinite(a))return[];if(0<a)for(t=Math.ceil(t/a),n=Math.floor(n/a),o=new Array(i=Math.ceil(n-t+1));++u<i;)o[u]=(t+u)*a;else for(t=Math.floor(t*a),n=Math.ceil(n*a),o=new Array(i=Math.ceil(t-n+1));++u<i;)o[u]=(t-u)/a;return r&&o.reverse(),o}(n[0],n[n.length-1],null==t?10:t)},u.tickFormat=function(t,n){return ta(l(),t,n)},u.nice=function(t){null==t&&(t=10);var n,e=l(),r=0,i=e.length-1,o=e[r],a=e[i];return a<o&&(n=o,o=a,a=n,n=r,r=i,i=n),0<(n=s(o,a,t))?n=s(o=Math.floor(o/n)*n,a=Math.ceil(a/n)*n,t):n<0&&(n=s(o=Math.ceil(o*n)/n,a=Math.floor(a*n)/n,t)),0<n?(e[r]=Math.floor(o/n)*n,e[i]=Math.ceil(a/n)*n,l(e)):n<0&&(e[r]=Math.ceil(o*n)/n,e[i]=Math.floor(a*n)/n,l(e)),u},u}function ea(){var n=function(n,e){var r,o,a,u=Go,l=Go,s=Ui,c=!1;function i(){return r=2<Math.min(u.length,l.length)?Ko:Jo,o=a=null,t}function t(t){return(o||(o=r(u,l,c?(i=n,function(n,e){var r=i(n=+n,e=+e);return function(t){return t<=n?0:e<=t?1:r(t)}}):n,s)))(+t);var i}return t.invert=function(t){return(a||(a=r(l,u,Qo,c?(i=e,function(n,e){var r=i(n=+n,e=+e);return function(t){return t<=0?n:1<=t?e:r(t)}}):e)))(+t);var i},t.domain=function(t){return arguments.length?(u=Wo.call(t,Zo),i()):u.slice()},t.range=function(t){return arguments.length?(l=$o.call(t),i()):l.slice()},t.rangeRound=function(t){return l=$o.call(t),s=Li,i()},t.clamp=function(t){return arguments.length?(c=!!t,i()):c},t.interpolate=function(t){return arguments.length?(s=t,i()):s},i()}(Qo,Ei);return n.copy=function(){return t=n,ea().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp());var t},na(n)}function ra(t){this.container=qe(t),this._width=null,this._height=null,this._handleRadius=15,this._channelHeight=5,this._channelRadius=null,this._handleFill="black",this._channelFill="#eee",this._margin={top:null,left:null,right:null},this._domain=[0,1],this._value=null,this._snap=!1,this._scale=null,this._axis=!1,this._ticks=null,this._tickFormat=null,this._tickSize=null,this._label=null,this._labelSize=18,this._startLabel=null,this._startLabelBelow=!1,this._endLabel=null,this._endLabelBelow=!1,this._startEndLabelSize=16,this.handlers={change:[]}}function ia(n){0<n.length&&"_"==n.charAt(0)&&(ra.prototype[n.substr(1)]=function(t){return void 0===t?this[n]:(this[n]=t,this)})}var oa,aa,ua=new ra;for(var la in ua)ia(la);function sa(t,n){return"boolean"==typeof t?t?Math.round(n):n:function t(n,e,r,i){if(void 0===r&&(r=0),void 0===i&&(i=n.length),i-r==0)return e;if(i-r==1)return n[r];if(i-r==2)return Math.abs(n[r]-e)<=Math.abs(n[r+1]-e)?n[r]:n[r+1];var o=r+Math.floor((i-r)/2),a=n[o],u=n[o-1];return u<=e&&e<=a?Math.abs(u-e)<=Math.abs(a-e)?u:a:a<=e?t(n,e,o,i):t(n,e,r,o)}(t,n)}function ca(t){return new ra(t)}function ha(t){var n,i,e=t.container,o=t.props,a=t.onChangeCallbacks,r=t.container_selector,u=e.append("div").attr("class","slider-holder animatable"),l=u.append("div").attr("class","slider-play");u.append("div").attr("class","slider");var s,c=ca(r+" .slider-holder .slider").channelHeight(6).snap(!0).on("change",function(t){t!==o.index&&(o.index=t,a())}),h=function(){s&&(clearInterval(s),s=void 0,u.classed("playing",!1),l.style("background-image",n))},f=function(e){if(0!==e||o.slider_loop){var t=1e3*(Math.abs(o.slider_step_time)+(e?0:o.slider_loop_pause));s=setTimeout(function(){var t=o.n_options,n=0<=o.slider_step_time?e:t-(1+e);c.value(n).update(),o.index=n,a(),f((e+1)%t)},t)}else h()};l.on("click",function(){u.classed("playing")?h():o.slider_play_button&&function(){var t=o.n_options;if(!(t<2)){var n=t-1,e=o.index,r=o.slider_step_time;u.classed("playing",!0),l.style("background-image",i),0<r&&e===n?(e=0,c.value(e).update(),o.index=e,a()):r<0&&0===e&&(e=n,c.value(e).update(),o.index=e,a()),f((0<r?e:t-(1+e))+1)}}()});var d,p=function(){o.slider_play_button?(u.classed("animatable",!0),l.style("transform",o.slider_step_time<0?"rotate(180deg)":null)):(h(),u.classed("animatable",!1)),d!==o.slider_handle_colour&&(c.update(),d=o.slider_handle_colour,u.select(".slider-handle").style("fill",d),n=Eo('<svg width="25px" height="30px" viewBox="0 0 25 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <polygon id="Triangle" fill="'+d+'" stroke="none" points="25 15 0 30 0 0"></polygon> </svg>'),i=Eo('<svg width="26px" height="30px" viewBox="0 0 26 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g stroke="none" stroke-width="1" fill="'+d+'"><rect x="2" y="2" width="9" height="26"></rect> <rect x="15" y="2" width="9" height="26"></rect> </g> </svg>'),l.style("background-image",s?i:n))},g=function(){var t;!function(){u.style("width",o.width);var t=window.innerWidth,n=t<520?12:15;c.labelSize(t<520?12:14).handleRadius(n).margin({left:n+5,right:n,top:t<520?33:31})}(),p(),t=!0===o.slider_label?o.value:"string"==typeof o.slider_label?o.slider_label:null,c.label(t)},m={handle:u};return m.show=function(){return u.style("display","inline-block"),g(),c.update(),m},m.hide=function(){return h(),u.style("display","none"),m},m.setValue=function(){return c.value(o.index),m},m.setOptions=function(){return c.domain([0,o.n_options-1]).update(),m},m.remove=function(){return u.remove(),m},m}function fa(t){var e,n,r,i=zo(t),o=i.output_obj,a=i.props,u=i.container,l=Uo(i),s=Lo(i,l),c=ha(i),h=(e=[],function(){var t=a.options,n=t.length;if(!(n<2))return!(e&&t.length===e.length&&t.every(function(t,n){return t===e[n]})||(e=Object.freeze(t.slice()),a.index>n-1&&(a.index=n-1),0))}),f=function(){if(n===a.index&&r===a.value)return!1;var t=a.n_options;return a.index>t-1&&(a.index=t-1),n=a.index,r=a.value,!0},d=function(t){"none"===t?u.style("display","none"):u.style("display",null),"dropdown"===t?l.show():l.hide(),"slider"===t?c.show():c.hide(),"buttons"===t?s.show():s.hide()},p=function(){var t=h();if(a.n_options<2)return a.index=0,void d("none");(f()||t)&&(t&&(l.setOptions(),s.setOptions(),c.setOptions()),l.setValue(),s.setValue(),c.setValue()),d(a.control)};return window.addEventListener("resize",p),o.update=function(){return p(),this},o.remove=function(){return l.remove(),s.remove(),c.remove(),i.added_class&&u.classed("controls-container",!1),window.removeEventListener("resize",p),this},o}function da(t){return"auto"!==t?t:"auto-buttons"}ra.prototype.margin=function(t){if(!t)return this._margin;for(la in t){if(!(la in this._margin))throw"Slider.margin: unrecognised option "+la;this._margin[la]=t[la]}return this},ra.prototype.on=function(t,n){if(!(t in this.handlers))throw"Slider.on: No such event: "+t;return this.handlers[t].push(n),this},ra.prototype.fire=function(t,n){if(!(t in this.handlers))throw"Slider.fire: No such event: "+t;for(var e=this.handlers[t],r=0;r<e.length;r++)e[r].call(this,n);return this},ra.prototype.update=ra.prototype.draw=function(){var i=this,t=this._width,n=this._height,e=this.container.node();if(!t){var r=e.getBoundingClientRect();if(!r||0==r.width)return this;t=r.width,n=r.height}var o,a=null==this._channelRadius?this._channelHeight/2:this._channelRadius,u=null==this._margin.left?Math.max(this._handleRadius,a):this._margin.left,l=null==this._margin.right?Math.max(this._handleRadius,a):this._margin.right,s=null==this._margin.top?Math.max(this._handleRadius,this._channelHeight/2):this._margin.top,c=t-u-l,h=c+2*a,f=1.5*this._labelSize;null!=this._label&&null==this._margin.top&&(s+=f),"http://www.w3.org/2000/svg"==e.namespaceURI?o=this.container:((o=this.container.selectAll("svg").data([{width:t,height:n}])).exit().remove(),(o=o.enter().append("svg").merge(o)).attr("width",function(t){return t.width}).attr("height",function(t){return t.height}));var d=o.selectAll("g.slider-container").data([{left:u,top:s,id:this._id}]);d.exit().remove(),(d=d.enter().append("g").attr("class","slider-container").merge(d)).attr("transform",function(t){return"translate("+t.left+","+t.top+")"}).attr("id",function(t){return t.id}),this.scale=(this._scale?this._scale():ea()).domain(this._domain).range([0,c]),null==this._value||this._value<this._domain[0]?this._value=this._domain[0]:this._value>this._domain[1]&&(this._value=this._domain[1]),this._snap&&(this._value=sa(this._snap,this._value));var p,g,m=[];this._axis&&(p="boolean"!=typeof this._axis?this._axis(this.scale):Vo(Yo,g).scale(this.scale).tickPadding(6),this._ticks&&p.ticks(this._ticks),this._tickFormat&&p.tickFormat(this._tickFormat),this._tickSize?p.tickSize(this._tickSize):p.tickSize(Math.max(5,this._handleRadius-this._channelHeight-2)),m.push(p));var v,_,y,w,b=d.selectAll(".slider-axis").data(m).enter();function x(){document.removeEventListener("mouseup",x,!1),document.removeEventListener("mousemove",M,!1)}function M(t){A(t.clientX-y)}function k(){document.removeEventListener("touchend",k,!1),document.removeEventListener("touchmove",C,!1)}function C(t){1==t.touches.length&&A(t.touches[0].clientX-y)}function A(t){var n=w+t,e=Math.max(0,Math.min(c,n)),r=i.scale.invert(e);i._snap&&(r=sa(i._snap,r)),_.attr("cx",i.scale(r)),r!=i._value&&(i._value=r,i.fire("change",i._value))}b.append("g").attr("class","slider-axis").attr("transform","translate(0,"+this._channelHeight/2+")").each(function(t){t(qe(this))}),b.select(".domain").attr("fill","none"),b.selectAll(".tick line").attr("stroke","black"),b.exit().remove(),(v=d.selectAll(".slider-channel").data([{width:h,height:this._channelHeight,channel_r:a}])).exit().remove(),(v=v.enter().append("rect").attr("class","slider-channel").attr("cursor","pointer").on("click",function(){var t=Math.max(0,Math.min(c,Be(this)[0]));i._value=i.scale.invert(t),i._snap&&(i._value=sa(i._snap,i._value)),_.attr("cx",i.scale(i._value)),i.fire("change",i._value)}).merge(v)).attr("width",function(t){return t.width}).attr("fill",this._channelFill).attr("height",function(t){return t.height}).attr("y",function(t){return-t.height/2}).attr("x",function(t){return-t.channel_r}).attr("rx",function(t){return t.channel_r}),(_=(_=d.selectAll(".slider-handle").data([{v:this._value,x:this.scale(this._value)}])).enter().append("circle").attr("class","slider-handle").attr("cursor","col-resize").merge(_)).attr("cx",function(t){return t.x}).attr("r",this._handleRadius).attr("fill",this._handleFill).on("mousedown",function(){var t;Ue.preventDefault(),t=Ue,document.addEventListener("mouseup",x,!1),document.addEventListener("mousemove",M,!1),y=t.clientX,w=i.scale(i._value)}).on("touchstart",function(){var t;Ue.preventDefault(),1==(t=Ue).touches.length&&(document.addEventListener("touchend",k,!1),document.addEventListener("touchmove",C,!1),y=t.touches[0].clientX,w=i.scale(i._value))});var T=[];this._label&&T.push({label:this._label,x:c/2,y:-f,font_size:this._labelSize});var S=d.selectAll(".slider-label").data(T);S.exit().remove(),(S=S.enter().append("text").attr("class","slider-label").attr("text-anchor","middle").attr("cursor","default").merge(S)).text(function(t){return t.label}).attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("font-size",this._labelSize);var E=[];this._startLabel&&E.push({label:this._startLabel,x:this._startLabelBelow?0:-(a+5+Math.max(0,this._handleRadius-a)),y:this._startLabelBelow?a+15:this._startEndLabelSize/1.75-a/2,anchor:this._startLabelBelow?"middle":"end",font_size:this._startEndLabelSize}),this._endLabel&&E.push({label:this._endLabel,x:this._endLabelBelow?c:c+(a+Math.max(0,this._handleRadius-a)+5),y:this._startLabelBelow?a+15:this._startEndLabelSize/1.75-a/2,anchor:this._endLabelBelow?"middle":"start",font_size:this._startEndLabelSize});var N=d.selectAll(".slider-end-labels").data(E);return N.exit().remove(),(N=N.enter().append("text").attr("class","slider-end-labels").attr("pointer-events","none").merge(N)).text(function(t){return t.label}).attr("font-size",function(t){return t.font_size}).attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("text-anchor",function(t){return t.anchor}),this},ca.version="1.3.2";var pa=function(){mn.values.column_names.hasOwnProperty("filter1")?(oa.options(qn).value(gn.filter1).type(da(gn.f1_control,gn.f1_type)).sliderStepTime(gn.f1_step_time).sliderLoop(gn.f2_loop).sliderLoopPause(gn.f1_loop_pause).sliderPlayButton(gn.f1_play_button).sliderHandleColour(gn.accent_colour).dropdownIconColour(gn.controls_text_color).update(),gn.filter1=oa.value()):oa.options([]).update()},ga=function(){mn.values.column_names.hasOwnProperty("filter2")?(aa.options(Bn).value(gn.filter2).type(da(gn.f2_control,gn.f2_type)).sliderStepTime(gn.f2_step_time).sliderLoop(gn.f2_loop).sliderLoopPause(gn.f2_loop_pause).sliderPlayButton(gn.f2_play_button).sliderHandleColour(gn.accent_colour).dropdownIconColour(gn.controls_text_color).update(),gn.filter2=aa.value()):aa.options([]).update()};function ma(){zn.hide(),oa.container.style("width",gn.f1_width+"px"),aa.container.style("width",gn.f2_width+"px"),pa(),ga(),Ie(".slider .slider-label").style("fill",gn.accent_colour),Ie(".slider .slider-channel").style("fill",gn.controls_channel_color),Ie(".controls-container .button, .dropdown .main").style("background-color",gn.controls_background_color).style("background-image",null).style("color",gn.controls_text_color).style("border-color",gn.controls_button_border).select(".current").style("color",gn.controls_text_color),Ie(".controls-container .button.selected").style("background-image","linear-gradient(0deg, rgba(0,0,0,0.2), rgba(0,0,0,0.3))").style("color","white").style("border-color",gn.controls_button_border);var t=Ie(".button-container.button-group").style("border-color",gn.controls_button_border);t.select(".button").style("border-left-color",gn.controls_button_border),t.select(".button:first-child").style("border","none")}function va(){qe("#user-css").text(gn.custom_css?gn.css:""),qe("body").classed("show-values",gn.show_values).style("color",gn.text_color),qe("#bg-color").style("background",gn.background_colour).style("visibility","visible"),qe("#title").text(gn.title),qe("#subtitle").text(gn.subtitle),qe("#nav").style("visibility","visible"),Ie(".rank-number, .score").style("color",gn.accent_colour),qe("#globe").style("visibility","visible"),Ie(".grad").style("visibility","visible").style("opacity",gn.grad_opacity),function(){var t=Ir(gn.background_colour),n=Jr(gn.background_colour);t.opacity=0;var e,r=t.toString();e=gn.grad_overwrite?gn.grad_color:(n.opacity=1,.9<n.l?n.s=Math.min(1.1-n.l,1):.7<n.l?n.s=Math.min(1.3-n.l,1):n.s=Math.min(1.5-n.l,1),n.l=Math.max(Math.min(n.l-.4,.3),0),n.rgb().toString()),Ie(".grad").style("background","linear-gradient(to left, "+r+", "+e+")")}()}function _a(){va(),ne(),ma(),po(),fo(),To()}function ya(){return 0<=(t=window.navigator.userAgent).indexOf("MSIE ")||0<=t.indexOf("Trident/")||!Detector.webgl;var t}return t.data=mn,t.state=gn,t.draw=function(){ya()?window.location.href=Flourish.static_prefix+"/error.html":(va(),ne(),ro=new Globe(document.getElementById("globe")),qe("#globe canvas").on("click",_o).on("mousemove",yo).on("touchstart",wo),ro.begin(),ro.onStateChange(ho),oa=fa("#filter1-menu").on("change",function(t){gn.filter1=t,_a()}),aa=fa("#filter2-menu").on("change",function(t){gn.filter2=t,_a()}),ma(),po(),fo(),To(),window.onresize=function(){_a()})},t.update=_a,t}({});
//# sourceMappingURL=template.js.map
</script><script>
var path = document.location.href.match(/\/visualisation\/(\d+)/);
if (path) {
	path = path[0];
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

	ga("create", "UA-44635456-19", "auto", { storage: "none" });
	ga("set", "transport", "beacon");
	ga("set", "dimension1", path.substr(1));
	ga("set", "dimension2", new Date().toISOString());
	ga("send", "pageview", path);
}</script><script>!function(){"use strict";var t,a;function d(){if(null==t){var e=function(){var e=window.location;"about:srcdoc"==e.href&&(e=window.parent.location);var i={};return function(e,t,n){for(;n=t.exec(e);)i[decodeURIComponent(n[1])]=decodeURIComponent(n[2])}(e.search.substring(1).replace(/\+/g,"%20"),/([^&=]+)=?([^&]*)/g),i}();t="referrer"in e?/^https:\/\/medium.com\//.test(e.referrer):!("auto"in e)}return t}function s(e){var t=e||window.innerWidth;return 999<t?650:599<t?575:400}function u(e,t){if(window.top!==window.self){var n=window;if("srcdoc"==n.location.pathname&&(n=n.parent),a)return e=parseInt(e,10),void n.parent.postMessage({sentinel:"amp",type:"embed-size",height:e},"*");var i={sender:"Flourish",context:"iframe.resize",method:"resize",height:e,src:n.location.toString()};if(t)for(var r in t)i[r]=t[r];n.parent.postMessage(JSON.stringify(i),"*")}}function f(){return(-1!==navigator.userAgent.indexOf("Safari")||-1!==navigator.userAgent.indexOf("iPhone"))&&-1==navigator.userAgent.indexOf("Chrome")}function h(r){window.addEventListener("message",function(t){if(null!=t.source&&(t.origin===document.location.origin||t.origin.match(/\/\/localhost:\d+$|\/\/flourish-api\.com$|\.flourish\.(?:local(:\d+)?|net|rocks|studio)$|\.uri\.sh$/))){var e;try{e=JSON.parse(t.data)}catch(e){return void console.warn("Unexpected non-JSON message: "+JSON.stringify(t.data))}if("Flourish"===e.sender){for(var n=document.querySelectorAll("iframe"),i=0;i<n.length;i++)if(n[i].contentWindow==t.source||n[i].contentWindow==t.source.parent)return void r(e,n[i]);console.warn("could not find frame",e)}}}),f()&&(window.addEventListener("resize",e),e())}function e(){for(var e=document.querySelectorAll(".flourish-embed"),t=0;t<e.length;t++){var n=e[t];if(!n.getAttribute("data-width")){var i=n.querySelector("iframe"),r=window.getComputedStyle(n),o=n.offsetWidth-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight);i.style.width=o+"px"}}}function c(e,t,n,i){var r;n&&"number"==typeof n?(r=n,n+="px"):n&&n.match(/^[ \t\r\n\f]*([+-]?\d+|\d*\.\d+(?:[eE][+-]?\d+)?)(?:\\?[Pp]|\\0{0,4}[57]0(?:\r\n|[ \t\r\n\f])?)(?:\\?[Xx]|\\0{0,4}[57]8(?:\r\n|[ \t\r\n\f])?)[ \t\r\n\f]*$/)&&(r=parseFloat(n)),i&&"number"==typeof i&&(i+="px");var o=document.createElement("iframe");return o.setAttribute("scrolling","no"),o.setAttribute("frameborder","0"),t.appendChild(o),n?o.style.width=n:f()?o.style.width=t.offsetWidth+"px":o.style.width="100%",!i&&(e.match(/\?/)?e+="&auto=1":e+="?auto=1",i=s(r||o.offsetWidth)+"px"),i&&("%"===i.charAt(i.length-1)&&(i=parseFloat(i)/100*t.parentNode.offsetHeight+"px"),o.style.height=i),o.setAttribute("src",e),o}!function(){Flourish.warn=function(e){console.warn(e)};var t,n=window.top===window.self,i=n?null:(a="#amp=1"==window.location.hash,{createEmbedIframe:c,isFixedHeight:d,getHeightForBreakpoint:s,startEventListeners:h,notifyParentWindow:u,isSafari:f}),r=!0;function o(){var e;Flourish.fixed_height||(null!=t?e=t:r&&(e=i.getHeightForBreakpoint()),e!==window.innerHeight&&i.notifyParentWindow(e))}function e(){o(),window.addEventListener("resize",o)}Flourish.uploadImage=function(e){if(n||"story_editor"!==Flourish.environment)throw"Invalid upload request";var t={sender:"Flourish",method:"request-upload",name:e.name,accept:e.accept};window.parent.postMessage(JSON.stringify(t),"*")},Flourish.setHeight=function(e){Flourish.fixed_height||(r=null==(t=e),o())},Flourish.checkHeight=function(){if(!n){var e=Flourish.__container_height;null!=e?(Flourish.fixed_height=!0,i.notifyParentWindow(e)):i.isFixedHeight()?Flourish.fixed_height=!0:(Flourish.fixed_height=!1,o())}},Flourish.fixed_height=n||i.isFixedHeight(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}()}();
//# sourceMappingURL=embedded.js.map
</script><script>
		function _Flourish_unflattenInto(dest, src) {
			dest = dest || {};
			for (var k in src) {
				var t = dest;
				for (var i = k.indexOf("."), p = 0; i >= 0; i = k.indexOf(".", p = i+1)) {
					var s = k.substring(p, i);
					if (!(s in t)) t[s] = {};
					t = t[s];
				}
				t[k.substring(p)] = src[k];
			}
			return dest;
		}
		var _Flourish_settings = {"auto_rotate":true,"custom_css":false,"f2_control":"slider","f2_play_button":true,"f2_temp_format":"%Y-%m-%d","globe_skin":"world_blue_white.jpg","grad_opacity":0.8,"grad_overwrite":false,"label_format.prefix":"","label_format.suffix":"cases","num_arrows":20,"selected_colour":"#ffdbd8","subtitle":"各國首例確診病例移入國家視覺化","title":"武漢肺炎如何散佈至全球"};
		_Flourish_unflattenInto(window.template.state, _Flourish_settings);

		var _Flourish_data_column_names = {"locations":{"code":"Three-letter country code","latitude":"Capital latitude","longitude":"Capital longitude","name":"Country name"},"values":{"dst":"destination","filter1":"category","filter2":"time","src":"source","val":"value"}},
				_Flourish_data = {"locations":[{"code":"SGS","latitude":"-54.283333","longitude":"-36.5","name":"South Georgia and South Sandwich Islands"},{"code":"ATF","latitude":"-49.35","longitude":"70.216667","name":"French Southern and Antarctic Lands"},{"code":"PSE","latitude":"31.76666667","longitude":"35.233333","name":"Palestine"},{"code":"ALA","latitude":"60.116667","longitude":"19.9","name":"Aland Islands"},{"code":"NRU","latitude":"-0.5477","longitude":"166.920867","name":"Nauru"},{"code":"MAF","latitude":"18.0731","longitude":"-63.0822","name":"Saint Martin"},{"code":"TKL","latitude":"-9.166667","longitude":"-171.833333","name":"Tokelau"},{"code":"ESH","latitude":"27.153611","longitude":"-13.203333","name":"Western Sahara"},{"code":"AFG","latitude":"34.51666667","longitude":"69.183333","name":"Afghanistan"},{"code":"ALB","latitude":"41.31666667","longitude":"19.816667","name":"Albania"},{"code":"DZA","latitude":"36.75","longitude":"3.05","name":"Algeria"},{"code":"ASM","latitude":"-14.26666667","longitude":"-170.7","name":"American Samoa"},{"code":"AND","latitude":"42.5","longitude":"1.516667","name":"Andorra"},{"code":"AGO","latitude":"-8.833333333","longitude":"13.216667","name":"Angola"},{"code":"AIA","latitude":"18.21666667","longitude":"-63.05","name":"Anguilla"},{"code":"ATG","latitude":"17.11666667","longitude":"-61.85","name":"Antigua and Barbuda"},{"code":"ARG","latitude":"-34.58333333","longitude":"-58.666667","name":"Argentina"},{"code":"ARM","latitude":"40.16666667","longitude":"44.5","name":"Armenia"},{"code":"ABW","latitude":"12.51666667","longitude":"-70.033333","name":"Aruba"},{"code":"AUS","latitude":"-35.26666667","longitude":"149.133333","name":"Australia"},{"code":"AUT","latitude":"48.2","longitude":"16.366667","name":"Austria"},{"code":"AZE","latitude":"40.38333333","longitude":"49.866667","name":"Azerbaijan"},{"code":"BHS","latitude":"25.08333333","longitude":"-77.35","name":"Bahamas"},{"code":"BHR","latitude":"26.23333333","longitude":"50.566667","name":"Bahrain"},{"code":"BGD","latitude":"23.71666667","longitude":"90.4","name":"Bangladesh"},{"code":"BRB","latitude":"13.1","longitude":"-59.616667","name":"Barbados"},{"code":"BLR","latitude":"53.9","longitude":"27.566667","name":"Belarus"},{"code":"BEL","latitude":"50.83333333","longitude":"4.333333","name":"Belgium"},{"code":"BLZ","latitude":"17.25","longitude":"-88.766667","name":"Belize"},{"code":"BEN","latitude":"6.483333333","longitude":"2.616667","name":"Benin"},{"code":"BMU","latitude":"32.28333333","longitude":"-64.783333","name":"Bermuda"},{"code":"BTN","latitude":"27.46666667","longitude":"89.633333","name":"Bhutan"},{"code":"BOL","latitude":"-16.5","longitude":"-68.15","name":"Bolivia"},{"code":"BIH","latitude":"43.86666667","longitude":"18.416667","name":"Bosnia and Herzegovina"},{"code":"BWA","latitude":"-24.63333333","longitude":"25.9","name":"Botswana"},{"code":"BRA","latitude":"-15.78333333","longitude":"-47.916667","name":"Brazil"},{"code":"VGB","latitude":"18.41666667","longitude":"-64.616667","name":"British Virgin Islands"},{"code":"BRN","latitude":"4.883333333","longitude":"114.933333","name":"Brunei Darussalam"},{"code":"BGR","latitude":"42.68333333","longitude":"23.316667","name":"Bulgaria"},{"code":"BFA","latitude":"12.36666667","longitude":"-1.516667","name":"Burkina Faso"},{"code":"MMR","latitude":"16.8","longitude":"96.15","name":"Myanmar"},{"code":"BDI","latitude":"-3.366666667","longitude":"29.35","name":"Burundi"},{"code":"KHM","latitude":"11.55","longitude":"104.916667","name":"Cambodia"},{"code":"CMR","latitude":"3.866666667","longitude":"11.516667","name":"Cameroon"},{"code":"CAN","latitude":"45.41666667","longitude":"-75.7","name":"Canada"},{"code":"CPV","latitude":"14.91666667","longitude":"-23.516667","name":"Cape Verde"},{"code":"CYM","latitude":"19.3","longitude":"-81.383333","name":"Cayman Islands"},{"code":"CAF","latitude":"4.366666667","longitude":"18.583333","name":"Central African Republic"},{"code":"TCD","latitude":"12.1","longitude":"15.033333","name":"Chad"},{"code":"CHL","latitude":"-33.45","longitude":"-70.666667","name":"Chile"},{"code":"CHN","latitude":"39.91666667","longitude":"116.383333","name":"China"},{"code":"CXR","latitude":"-10.41666667","longitude":"105.716667","name":"Christmas Island"},{"code":"CCK","latitude":"-12.16666667","longitude":"96.833333","name":"Cocos Islands"},{"code":"COL","latitude":"4.6","longitude":"-74.083333","name":"Colombia"},{"code":"COM","latitude":"-11.7","longitude":"43.233333","name":"Comoros"},{"code":"COD","latitude":"-4.316666667","longitude":"15.3","name":"Democratic Republic of the Congo"},{"code":"COG","latitude":"-4.25","longitude":"15.283333","name":"Republic of Congo"},{"code":"COK","latitude":"-21.2","longitude":"-159.766667","name":"Cook Islands"},{"code":"CRI","latitude":"9.933333333","longitude":"-84.083333","name":"Costa Rica"},{"code":"CIV","latitude":"6.816666667","longitude":"-5.266667","name":"Cote d'Ivoire"},{"code":"HRV","latitude":"45.8","longitude":"16","name":"Croatia"},{"code":"CUB","latitude":"23.11666667","longitude":"-82.35","name":"Cuba"},{"code":"CUW","latitude":"12.1","longitude":"-68.916667","name":"CuraÃ§ao"},{"code":"CYP","latitude":"35.16666667","longitude":"33.366667","name":"Cyprus"},{"code":"CZE","latitude":"50.08333333","longitude":"14.466667","name":"Czech Republic"},{"code":"DNK","latitude":"55.66666667","longitude":"12.583333","name":"Denmark"},{"code":"DJI","latitude":"11.58333333","longitude":"43.15","name":"Djibouti"},{"code":"DMA","latitude":"15.3","longitude":"-61.4","name":"Dominica"},{"code":"DOM","latitude":"18.46666667","longitude":"-69.9","name":"Dominican Republic"},{"code":"ECU","latitude":"-0.216666667","longitude":"-78.5","name":"Ecuador"},{"code":"EGY","latitude":"30.05","longitude":"31.25","name":"Egypt"},{"code":"SLV","latitude":"13.7","longitude":"-89.2","name":"El Salvador"},{"code":"GNQ","latitude":"3.75","longitude":"8.783333","name":"Equatorial Guinea"},{"code":"ERI","latitude":"15.33333333","longitude":"38.933333","name":"Eritrea"},{"code":"EST","latitude":"59.43333333","longitude":"24.716667","name":"Estonia"},{"code":"ETH","latitude":"9.033333333","longitude":"38.7","name":"Ethiopia"},{"code":"FLK","latitude":"-51.7","longitude":"-57.85","name":"Falkland Islands"},{"code":"FRO","latitude":"62","longitude":"-6.766667","name":"Faroe Islands"},{"code":"FJI","latitude":"-18.13333333","longitude":"178.416667","name":"Fiji"},{"code":"FIN","latitude":"60.16666667","longitude":"24.933333","name":"Finland"},{"code":"FRA","latitude":"48.86666667","longitude":"2.333333","name":"France"},{"code":"PYF","latitude":"-17.53333333","longitude":"-149.566667","name":"French Polynesia"},{"code":"GAB","latitude":"0.383333333","longitude":"9.45","name":"Gabon"},{"code":"GMB","latitude":"13.45","longitude":"-16.566667","name":"The Gambia"},{"code":"GEO","latitude":"41.68333333","longitude":"44.833333","name":"Georgia"},{"code":"DEU","latitude":"52.51666667","longitude":"13.4","name":"Germany"},{"code":"GHA","latitude":"5.55","longitude":"-0.216667","name":"Ghana"},{"code":"GIB","latitude":"36.13333333","longitude":"-5.35","name":"Gibraltar"},{"code":"GRC","latitude":"37.98333333","longitude":"23.733333","name":"Greece"},{"code":"GRL","latitude":"64.18333333","longitude":"-51.75","name":"Greenland"},{"code":"GRD","latitude":"12.05","longitude":"-61.75","name":"Grenada"},{"code":"GUM","latitude":"13.46666667","longitude":"144.733333","name":"Guam"},{"code":"GTM","latitude":"14.61666667","longitude":"-90.516667","name":"Guatemala"},{"code":"GGY","latitude":"49.45","longitude":"-2.533333","name":"Guernsey"},{"code":"GIN","latitude":"9.5","longitude":"-13.7","name":"Guinea"},{"code":"GNB","latitude":"11.85","longitude":"-15.583333","name":"Guinea-Bissau"},{"code":"GUY","latitude":"6.8","longitude":"-58.15","name":"Guyana"},{"code":"HTI","latitude":"18.53333333","longitude":"-72.333333","name":"Haiti"},{"code":"VAT","latitude":"41.9","longitude":"12.45","name":"Vatican City"},{"code":"HND","latitude":"14.1","longitude":"-87.216667","name":"Honduras"},{"code":"HUN","latitude":"47.5","longitude":"19.083333","name":"Hungary"},{"code":"ISL","latitude":"64.15","longitude":"-21.95","name":"Iceland"},{"code":"IND","latitude":"28.6","longitude":"77.2","name":"India"},{"code":"IDN","latitude":"-6.166666667","longitude":"106.816667","name":"Indonesia"},{"code":"IRN","latitude":"35.7","longitude":"51.416667","name":"Iran"},{"code":"IRQ","latitude":"33.33333333","longitude":"44.4","name":"Iraq"},{"code":"IRL","latitude":"53.31666667","longitude":"-6.233333","name":"Ireland"},{"code":"IMN","latitude":"54.15","longitude":"-4.483333","name":"Isle of Man"},{"code":"ISR","latitude":"31.76666667","longitude":"35.233333","name":"Israel"},{"code":"ITA","latitude":"41.9","longitude":"12.483333","name":"Italy"},{"code":"JAM","latitude":"18","longitude":"-76.8","name":"Jamaica"},{"code":"JPN","latitude":"35.68333333","longitude":"139.75","name":"Japan"},{"code":"JEY","latitude":"49.18333333","longitude":"-2.1","name":"Jersey"},{"code":"JOR","latitude":"31.95","longitude":"35.933333","name":"Jordan"},{"code":"KAZ","latitude":"51.16666667","longitude":"71.416667","name":"Kazakhstan"},{"code":"KEN","latitude":"-1.283333333","longitude":"36.816667","name":"Kenya"},{"code":"KIR","latitude":"-0.883333333","longitude":"169.533333","name":"Kiribati"},{"code":"PRK","latitude":"39.01666667","longitude":"125.75","name":"North Korea"},{"code":"KOR","latitude":"37.55","longitude":"126.983333","name":"South Korea"},{"code":"#N/A","latitude":"42.66666667","longitude":"21.166667","name":"Kosovo"},{"code":"KWT","latitude":"29.36666667","longitude":"47.966667","name":"Kuwait"},{"code":"KGZ","latitude":"42.86666667","longitude":"74.6","name":"Kyrgyzstan"},{"code":"LAO","latitude":"17.96666667","longitude":"102.6","name":"Laos"},{"code":"LVA","latitude":"56.95","longitude":"24.1","name":"Latvia"},{"code":"LBN","latitude":"33.86666667","longitude":"35.5","name":"Lebanon"},{"code":"LSO","latitude":"-29.31666667","longitude":"27.483333","name":"Lesotho"},{"code":"LBR","latitude":"6.3","longitude":"-10.8","name":"Liberia"},{"code":"LBY","latitude":"32.88333333","longitude":"13.166667","name":"Libya"},{"code":"LIE","latitude":"47.13333333","longitude":"9.516667","name":"Liechtenstein"},{"code":"LTU","latitude":"54.68333333","longitude":"25.316667","name":"Lithuania"},{"code":"LUX","latitude":"49.6","longitude":"6.116667","name":"Luxembourg"},{"code":"MKD","latitude":"42","longitude":"21.433333","name":"Macedonia"},{"code":"MDG","latitude":"-18.91666667","longitude":"47.516667","name":"Madagascar"},{"code":"MWI","latitude":"-13.96666667","longitude":"33.783333","name":"Malawi"},{"code":"MYS","latitude":"3.166666667","longitude":"101.7","name":"Malaysia"},{"code":"MDV","latitude":"4.166666667","longitude":"73.5","name":"Maldives"},{"code":"MLI","latitude":"12.65","longitude":"-8","name":"Mali"},{"code":"MLT","latitude":"35.88333333","longitude":"14.5","name":"Malta"},{"code":"MHL","latitude":"7.1","longitude":"171.383333","name":"Marshall Islands"},{"code":"MRT","latitude":"18.06666667","longitude":"-15.966667","name":"Mauritania"},{"code":"MUS","latitude":"-20.15","longitude":"57.483333","name":"Mauritius"},{"code":"MEX","latitude":"19.43333333","longitude":"-99.133333","name":"Mexico"},{"code":"FSM","latitude":"6.916666667","longitude":"158.15","name":"Federated States of Micronesia"},{"code":"MDA","latitude":"47","longitude":"28.85","name":"Moldova"},{"code":"MCO","latitude":"43.73333333","longitude":"7.416667","name":"Monaco"},{"code":"MNG","latitude":"47.91666667","longitude":"106.916667","name":"Mongolia"},{"code":"MNE","latitude":"42.43333333","longitude":"19.266667","name":"Montenegro"},{"code":"MSR","latitude":"16.7","longitude":"-62.216667","name":"Montserrat"},{"code":"MAR","latitude":"34.01666667","longitude":"-6.816667","name":"Morocco"},{"code":"MOZ","latitude":"-25.95","longitude":"32.583333","name":"Mozambique"},{"code":"NAM","latitude":"-22.56666667","longitude":"17.083333","name":"Namibia"},{"code":"NPL","latitude":"27.71666667","longitude":"85.316667","name":"Nepal"},{"code":"NLD","latitude":"52.35","longitude":"4.916667","name":"Netherlands"},{"code":"NCL","latitude":"-22.26666667","longitude":"166.45","name":"New Caledonia"},{"code":"NZL","latitude":"-41.3","longitude":"174.783333","name":"New Zealand"},{"code":"NIC","latitude":"12.13333333","longitude":"-86.25","name":"Nicaragua"},{"code":"NER","latitude":"13.51666667","longitude":"2.116667","name":"Niger"},{"code":"NGA","latitude":"9.083333333","longitude":"7.533333","name":"Nigeria"},{"code":"NIU","latitude":"-19.01666667","longitude":"-169.916667","name":"Niue"},{"code":"NFK","latitude":"-29.05","longitude":"167.966667","name":"Norfolk Island"},{"code":"MNP","latitude":"15.2","longitude":"145.75","name":"Northern Mariana Islands"},{"code":"NOR","latitude":"59.91666667","longitude":"10.75","name":"Norway"},{"code":"OMN","latitude":"23.61666667","longitude":"58.583333","name":"Oman"},{"code":"PAK","latitude":"33.68333333","longitude":"73.05","name":"Pakistan"},{"code":"PLW","latitude":"7.483333333","longitude":"134.633333","name":"Palau"},{"code":"PAN","latitude":"8.966666667","longitude":"-79.533333","name":"Panama"},{"code":"PNG","latitude":"-9.45","longitude":"147.183333","name":"Papua New Guinea"},{"code":"PRY","latitude":"-25.26666667","longitude":"-57.666667","name":"Paraguay"},{"code":"PER","latitude":"-12.05","longitude":"-77.05","name":"Peru"},{"code":"PHL","latitude":"14.6","longitude":"120.966667","name":"Philippines"},{"code":"PCN","latitude":"-25.06666667","longitude":"-130.083333","name":"Pitcairn Islands"},{"code":"POL","latitude":"52.25","longitude":"21","name":"Poland"},{"code":"PRT","latitude":"38.71666667","longitude":"-9.133333","name":"Portugal"},{"code":"PRI","latitude":"18.46666667","longitude":"-66.116667","name":"Puerto Rico"},{"code":"QAT","latitude":"25.28333333","longitude":"51.533333","name":"Qatar"},{"code":"ROU","latitude":"44.43333333","longitude":"26.1","name":"Romania"},{"code":"RUS","latitude":"55.75","longitude":"37.6","name":"Russia"},{"code":"RWA","latitude":"-1.95","longitude":"30.05","name":"Rwanda"},{"code":"BLM","latitude":"17.88333333","longitude":"-62.85","name":"Saint Barthelemy"},{"code":"SHN","latitude":"-15.93333333","longitude":"-5.716667","name":"Saint Helena"},{"code":"KNA","latitude":"17.3","longitude":"-62.716667","name":"Saint Kitts and Nevis"},{"code":"LCA","latitude":"14","longitude":"-61","name":"Saint Lucia"},{"code":"SPM","latitude":"46.76666667","longitude":"-56.183333","name":"Saint Pierre and Miquelon"},{"code":"VCT","latitude":"13.13333333","longitude":"-61.216667","name":"Saint Vincent and the Grenadines"},{"code":"WSM","latitude":"-13.81666667","longitude":"-171.766667","name":"Samoa"},{"code":"SMR","latitude":"43.93333333","longitude":"12.416667","name":"San Marino"},{"code":"STP","latitude":"0.333333333","longitude":"6.733333","name":"Sao Tome and Principe"},{"code":"SAU","latitude":"24.65","longitude":"46.7","name":"Saudi Arabia"},{"code":"SEN","latitude":"14.73333333","longitude":"-17.633333","name":"Senegal"},{"code":"SRB","latitude":"44.83333333","longitude":"20.5","name":"Serbia"},{"code":"SYC","latitude":"-4.616666667","longitude":"55.45","name":"Seychelles"},{"code":"SLE","latitude":"8.483333333","longitude":"-13.233333","name":"Sierra Leone"},{"code":"SGP","latitude":"1.283333333","longitude":"103.85","name":"Singapore"},{"code":"SXM","latitude":"18.01666667","longitude":"-63.033333","name":"Sint Maarten"},{"code":"SVK","latitude":"48.15","longitude":"17.116667","name":"Slovakia"},{"code":"SVN","latitude":"46.05","longitude":"14.516667","name":"Slovenia"},{"code":"SLB","latitude":"-9.433333333","longitude":"159.95","name":"Solomon Islands"},{"code":"SOM","latitude":"2.066666667","longitude":"45.333333","name":"Somalia"},{"code":"ZAF","latitude":"-25.7","longitude":"28.216667","name":"South Africa"},{"code":"SSD","latitude":"4.85","longitude":"31.616667","name":"South Sudan"},{"code":"ESP","latitude":"40.4","longitude":"-3.683333","name":"Spain"},{"code":"LKA","latitude":"6.916666667","longitude":"79.833333","name":"Sri Lanka"},{"code":"SDN","latitude":"15.6","longitude":"32.533333","name":"Sudan"},{"code":"SUR","latitude":"5.833333333","longitude":"-55.166667","name":"Suriname"},{"code":"SJM","latitude":"78.21666667","longitude":"15.633333","name":"Svalbard"},{"code":"SWZ","latitude":"-26.31666667","longitude":"31.133333","name":"Swaziland"},{"code":"SWE","latitude":"59.33333333","longitude":"18.05","name":"Sweden"},{"code":"CHE","latitude":"46.91666667","longitude":"7.466667","name":"Switzerland"},{"code":"SYR","latitude":"33.5","longitude":"36.3","name":"Syria"},{"code":"TWN","latitude":"25.03333333","longitude":"121.516667","name":"Taiwan"},{"code":"TJK","latitude":"38.55","longitude":"68.766667","name":"Tajikistan"},{"code":"TZA","latitude":"-6.8","longitude":"39.283333","name":"Tanzania"},{"code":"THA","latitude":"13.75","longitude":"100.516667","name":"Thailand"},{"code":"TLS","latitude":"-8.583333333","longitude":"125.6","name":"Timor-Leste"},{"code":"TGO","latitude":"6.116666667","longitude":"1.216667","name":"Togo"},{"code":"TON","latitude":"-21.13333333","longitude":"-175.2","name":"Tonga"},{"code":"TTO","latitude":"10.65","longitude":"-61.516667","name":"Trinidad and Tobago"},{"code":"TUN","latitude":"36.8","longitude":"10.183333","name":"Tunisia"},{"code":"TUR","latitude":"39.93333333","longitude":"32.866667","name":"Turkey"},{"code":"TKM","latitude":"37.95","longitude":"58.383333","name":"Turkmenistan"},{"code":"TCA","latitude":"21.46666667","longitude":"-71.133333","name":"Turks and Caicos Islands"},{"code":"TUV","latitude":"-8.516666667","longitude":"179.216667","name":"Tuvalu"},{"code":"UGA","latitude":"0.316666667","longitude":"32.55","name":"Uganda"},{"code":"UKR","latitude":"50.43333333","longitude":"30.516667","name":"Ukraine"},{"code":"ARE","latitude":"24.46666667","longitude":"54.366667","name":"United Arab Emirates"},{"code":"GBR","latitude":"51.5","longitude":"-0.083333","name":"United Kingdom"},{"code":"USA","latitude":"38.883333","longitude":"-77","name":"United States"},{"code":"URY","latitude":"-34.85","longitude":"-56.166667","name":"Uruguay"},{"code":"UZB","latitude":"41.31666667","longitude":"69.25","name":"Uzbekistan"},{"code":"VUT","latitude":"-17.73333333","longitude":"168.316667","name":"Vanuatu"},{"code":"VEN","latitude":"10.48333333","longitude":"-66.866667","name":"Venezuela"},{"code":"VNM","latitude":"21.03333333","longitude":"105.85","name":"Vietnam"},{"code":"VIR","latitude":"18.35","longitude":"-64.933333","name":"US Virgin Islands"},{"code":"WLF","latitude":"-13.95","longitude":"-171.933333","name":"Wallis and Futuna"},{"code":"YEM","latitude":"15.35","longitude":"44.2","name":"Yemen"},{"code":"ZMB","latitude":"-15.41666667","longitude":"28.283333","name":"Zambia"},{"code":"ZWE","latitude":"-17.81666667","longitude":"31.033333","name":"Zimbabwe"},{"code":"UMI","latitude":"38.883333","longitude":"-77","name":"US Minor Outlying Islands"},{"code":"ATA","latitude":"0","longitude":"0","name":"Antarctica"},{"code":"HKG","latitude":"22.352493","longitude":"113.8475072","name":"Hong Kong"},{"code":"HMD","latitude":"0","longitude":"0","name":"Heard Island and McDonald Islands"},{"code":"IOT","latitude":"-7.3","longitude":"72.4","name":"British Indian Ocean Territory"},{"code":"MAC","latitude":"0","longitude":"0","name":"Macau"}],"values":[{"dst":"THA","filter1":"covid19","filter2":"01-13","src":"CHN","val":"1"},{"dst":"JPN","filter1":"covid19","filter2":"01-16","src":"CHN","val":"1"},{"dst":"NA","filter1":"covid19","filter2":"01-20","src":"CHN","val":"1"},{"dst":"TWN","filter1":"covid19","filter2":"01-21","src":"CHN","val":"1"},{"dst":"USA","filter1":"covid19","filter2":"01-21","src":"CHN","val":"1"},{"dst":"HKG","filter1":"covid19","filter2":"01-22","src":"CHN","val":"1"},{"dst":"MAC","filter1":"covid19","filter2":"01-22","src":"CHN","val":"1"},{"dst":"SGP","filter1":"covid19","filter2":"01-23","src":"CHN","val":"1"},{"dst":"VNM","filter1":"covid19","filter2":"01-23","src":"CHN","val":"1"},{"dst":"FRA","filter1":"covid19","filter2":"01-24","src":"CHN","val":"1"},{"dst":"NPL","filter1":"covid19","filter2":"01-24","src":"CHN","val":"1"},{"dst":"CAN","filter1":"covid19","filter2":"01-25","src":"CHN","val":"1"},{"dst":"MYS","filter1":"covid19","filter2":"01-25","src":"SGP","val":"1"},{"dst":"KHM","filter1":"covid19","filter2":"01-27","src":"CHN","val":"1"},{"dst":"DEU","filter1":"covid19","filter2":"01-27","src":"CHN","val":"1"},{"dst":"LKA","filter1":"covid19","filter2":"01-27","src":"CHN","val":"1"},{"dst":"FIN","filter1":"covid19","filter2":"01-28","src":"CHN","val":"1"},{"dst":"ARE","filter1":"covid19","filter2":"01-29","src":"CHN","val":"1"},{"dst":"IND","filter1":"covid19","filter2":"01-30","src":"CHN","val":"1"},{"dst":"PHL","filter1":"covid19","filter2":"01-30","src":"CHN","val":"1"},{"dst":"ITA","filter1":"covid19","filter2":"01-31","src":"CHN","val":"1"},{"dst":"RUS","filter1":"covid19","filter2":"01-31","src":"CHN","val":"1"},{"dst":"ESP","filter1":"covid19","filter2":"01-31","src":"DEU","val":"1"},{"dst":"SWE","filter1":"covid19","filter2":"01-31","src":"CHN","val":"1"},{"dst":"GBR","filter1":"covid19","filter2":"01-31","src":"CHN","val":"1"},{"dst":"BEL","filter1":"covid19","filter2":"02-04","src":"CHN","val":"1"},{"dst":"EGY","filter1":"covid19","filter2":"02-14","src":"CHN","val":"1"},{"dst":"IRN","filter1":"covid19","filter2":"02-19","src":"NA","val":"1"},{"dst":"BHR","filter1":"covid19","filter2":"02-21","src":"IRN","val":"1"},{"dst":"BHR","filter1":"covid19","filter2":"02-21","src":"NA","val":"1"},{"dst":"ISR","filter1":"covid19","filter2":"02-21","src":"NA","val":"1"},{"dst":"LBN","filter1":"covid19","filter2":"02-21","src":"IRN","val":"1"},{"dst":"AFG","filter1":"covid19","filter2":"02-24","src":"IRN","val":"1"},{"dst":"IRQ","filter1":"covid19","filter2":"02-24","src":"IRN","val":"1"},{"dst":"KWT","filter1":"covid19","filter2":"02-24","src":"IRN","val":"1"},{"dst":"OMN","filter1":"covid19","filter2":"02-24","src":"IRN","val":"1"},{"dst":"DZA","filter1":"covid19","filter2":"02-25","src":"ITA","val":"1"},{"dst":"AUT","filter1":"covid19","filter2":"02-25","src":"ITA","val":"1"},{"dst":"BRA","filter1":"covid19","filter2":"02-25","src":"ITA","val":"1"},{"dst":"HRV","filter1":"covid19","filter2":"02-25","src":"ITA","val":"1"},{"dst":"CHE","filter1":"covid19","filter2":"02-25","src":"ITA","val":"1"},{"dst":"GEO","filter1":"covid19","filter2":"02-26","src":"IRN","val":"1"},{"dst":"GEO","filter1":"covid19","filter2":"02-26","src":"AZE","val":"1"},{"dst":"GRC","filter1":"covid19","filter2":"02-26","src":"ITA","val":"1"},{"dst":"NA","filter1":"covid19","filter2":"02-26","src":"ITA","val":"1"},{"dst":"NOR","filter1":"covid19","filter2":"02-26","src":"CHN","val":"1"},{"dst":"PAK","filter1":"covid19","filter2":"02-26","src":"IRN","val":"1"},{"dst":"ROU","filter1":"covid19","filter2":"02-26","src":"ITA","val":"1"},{"dst":"DNK","filter1":"covid19","filter2":"02-27","src":"ITA","val":"1"},{"dst":"EST","filter1":"covid19","filter2":"02-27","src":"IRN","val":"1"},{"dst":"EST","filter1":"covid19","filter2":"02-27","src":"TUR","val":"1"},{"dst":"NLD","filter1":"covid19","filter2":"02-27","src":"ITA","val":"1"},{"dst":"NGA","filter1":"covid19","filter2":"02-27","src":"ITA","val":"1"},{"dst":"SMR","filter1":"covid19","filter2":"02-27","src":"ITA","val":"1"},{"dst":"AZE","filter1":"covid19","filter2":"02-28","src":"IRN","val":"1"},{"dst":"BLR","filter1":"covid19","filter2":"02-28","src":"IRN","val":"1"},{"dst":"ISL","filter1":"covid19","filter2":"02-28","src":"ITA","val":"1"},{"dst":"LTU","filter1":"covid19","filter2":"02-28","src":"ITA","val":"1"},{"dst":"MEX","filter1":"covid19","filter2":"02-28","src":"ITA","val":"1"},{"dst":"MCO","filter1":"covid19","filter2":"02-28","src":"NA","val":"1"},{"dst":"NZL","filter1":"covid19","filter2":"02-28","src":"IRN","val":"1"},{"dst":"ARM","filter1":"covid19","filter2":"02-29","src":"IRN","val":"1"},{"dst":"ECU","filter1":"covid19","filter2":"02-29","src":"ESP","val":"1"},{"dst":"IRL","filter1":"covid19","filter2":"02-29","src":"ITA","val":"1"},{"dst":"LUX","filter1":"covid19","filter2":"02-29","src":"ITA","val":"1"},{"dst":"LUX","filter1":"covid19","filter2":"02-29","src":"BEL","val":"1"},{"dst":"QAT","filter1":"covid19","filter2":"02-29","src":"IRN","val":"1"},{"dst":"AUS","filter1":"covid19","filter2":"03-01","src":"NA","val":"1"},{"dst":"NA","filter1":"covid19","filter2":"03-01","src":"ITA","val":"1"},{"dst":"DOM","filter1":"covid19","filter2":"03-01","src":"ITA","val":"1"},{"dst":"AND","filter1":"covid19","filter2":"03-02","src":"ITA","val":"1"},{"dst":"IDN","filter1":"covid19","filter2":"03-02","src":"JPN","val":"1"},{"dst":"JOR","filter1":"covid19","filter2":"03-02","src":"ITA","val":"1"},{"dst":"LVA","filter1":"covid19","filter2":"03-02","src":"ITA","val":"1"},{"dst":"MAR","filter1":"covid19","filter2":"03-02","src":"ITA","val":"1"},{"dst":"PRT","filter1":"covid19","filter2":"03-02","src":"ITA","val":"1"},{"dst":"PRT","filter1":"covid19","filter2":"03-02","src":"ESP","val":"1"},{"dst":"SAU","filter1":"covid19","filter2":"03-02","src":"IRN","val":"1"},{"dst":"SAU","filter1":"covid19","filter2":"03-02","src":"BHR","val":"1"},{"dst":"SEN","filter1":"covid19","filter2":"03-02","src":"FRA","val":"1"},{"dst":"TUN","filter1":"covid19","filter2":"03-02","src":"ITA","val":"1"},{"dst":"ARG","filter1":"covid19","filter2":"03-03","src":"ITA","val":"1"},{"dst":"CHL","filter1":"covid19","filter2":"03-03","src":"NA","val":"1"},{"dst":"LIE","filter1":"covid19","filter2":"03-03","src":"CHE","val":"1"},{"dst":"UKR","filter1":"covid19","filter2":"03-03","src":"ITA","val":"1"},{"dst":"UKR","filter1":"covid19","filter2":"03-03","src":"ROU","val":"1"},{"dst":"HUN","filter1":"covid19","filter2":"03-04","src":"IRN","val":"1"},{"dst":"POL","filter1":"covid19","filter2":"03-04","src":"DEU","val":"1"},{"dst":"SVN","filter1":"covid19","filter2":"03-04","src":"MAR","val":"1"},{"dst":"SVN","filter1":"covid19","filter2":"03-04","src":"ITA","val":"1"},{"dst":"BIH","filter1":"covid19","filter2":"03-05","src":"ITA","val":"1"},{"dst":"NA","filter1":"covid19","filter2":"03-05","src":"NA","val":"1"},{"dst":"PSE","filter1":"covid19","filter2":"03-05","src":"NA","val":"1"},{"dst":"ZAF","filter1":"covid19","filter2":"03-05","src":"ITA","val":"1"},{"dst":"BTN","filter1":"covid19","filter2":"03-06","src":"USA","val":"1"},{"dst":"BTN","filter1":"covid19","filter2":"03-06","src":"IND","val":"1"},{"dst":"CMR","filter1":"covid19","filter2":"03-06","src":"FRA","val":"1"},{"dst":"COL","filter1":"covid19","filter2":"03-06","src":"ITA","val":"1"},{"dst":"CRI","filter1":"covid19","filter2":"03-06","src":"USA","val":"1"},{"dst":"NA","filter1":"covid19","filter2":"03-06","src":"FRA","val":"1"},{"dst":"PER","filter1":"covid19","filter2":"03-06","src":"ESP","val":"1"},{"dst":"PER","filter1":"covid19","filter2":"03-06","src":"FRA","val":"1"},{"dst":"PER","filter1":"covid19","filter2":"03-06","src":"CZE","val":"1"},{"dst":"SRB","filter1":"covid19","filter2":"03-06","src":"HUN","val":"1"},{"dst":"SVK","filter1":"covid19","filter2":"03-06","src":"ITA","val":"1"},{"dst":"TGO","filter1":"covid19","filter2":"03-06","src":"DEU","val":"1"},{"dst":"TGO","filter1":"covid19","filter2":"03-06","src":"FRA","val":"1"},{"dst":"TGO","filter1":"covid19","filter2":"03-06","src":"TUR","val":"1"},{"dst":"TGO","filter1":"covid19","filter2":"03-06","src":"BEN","val":"1"},{"dst":"BGD","filter1":"covid19","filter2":"03-07","src":"ITA","val":"1"},{"dst":"MDV","filter1":"covid19","filter2":"03-07","src":"ITA","val":"1"},{"dst":"MLT","filter1":"covid19","filter2":"03-07","src":"ITA","val":"1"},{"dst":"MDA","filter1":"covid19","filter2":"03-07","src":"ITA","val":"1"},{"dst":"PRY","filter1":"covid19","filter2":"03-07","src":"ECU","val":"1"},{"dst":"ALB","filter1":"covid19","filter2":"03-08","src":"ITA","val":"1"},{"dst":"BGR","filter1":"covid19","filter2":"03-08","src":"NA","val":"1"},{"dst":"NA","filter1":"covid19","filter2":"03-09","src":"MYS","val":"1"},{"dst":"BFA","filter1":"covid19","filter2":"03-09","src":"FRA","val":"1"},{"dst":"CYP","filter1":"covid19","filter2":"03-09","src":"ITA","val":"1"},{"dst":"CYP","filter1":"covid19","filter2":"03-09","src":"GBR","val":"1"},{"dst":"PAN","filter1":"covid19","filter2":"03-09","src":"NA","val":"1"},{"dst":"BOL","filter1":"covid19","filter2":"03-10","src":"ITA","val":"1"},{"dst":"NA","filter1":"covid19","filter2":"03-10","src":"FRA","val":"1"},{"dst":"HND","filter1":"covid19","filter2":"03-10","src":"ESP","val":"1"},{"dst":"JAM","filter1":"covid19","filter2":"03-10","src":"GBR","val":"1"},{"dst":"JEY","filter1":"covid19","filter2":"03-10","src":"ITA","val":"1"},{"dst":"NA","filter1":"covid19","filter2":"03-10","src":"FRA","val":"1"},{"dst":"MNG","filter1":"covid19","filter2":"03-10","src":"RUS","val":"1"},{"dst":"NA","filter1":"covid19","filter2":"03-10","src":"BEL","val":"1"},{"dst":"CIV","filter1":"covid19","filter2":"03-11","src":"ITA","val":"1"},{"dst":"CUB","filter1":"covid19","filter2":"03-11","src":"ITA","val":"1"},{"dst":"GUY","filter1":"covid19","filter2":"03-11","src":"USA","val":"1"},{"dst":"NA","filter1":"covid19","filter2":"03-11","src":"USA","val":"1"},{"dst":"NA","filter1":"covid19","filter2":"03-11","src":"FRA","val":"1"},{"dst":"VCT","filter1":"covid19","filter2":"03-11","src":"GBR","val":"1"},{"dst":"VCT","filter1":"covid19","filter2":"03-11","src":"BRB","val":"1"},{"dst":"TUR","filter1":"covid19","filter2":"03-11","src":"NA","val":"1"},{"dst":"GAB","filter1":"covid19","filter2":"03-12","src":"FRA","val":"1"},{"dst":"GHA","filter1":"covid19","filter2":"03-12","src":"NOR","val":"1"},{"dst":"GHA","filter1":"covid19","filter2":"03-12","src":"TUR","val":"1"},{"dst":"NA","filter1":"covid19","filter2":"03-12","src":"DOM","val":"1"},{"dst":"NA","filter1":"covid19","filter2":"03-12","src":"NA","val":"1"},{"dst":"TTO","filter1":"covid19","filter2":"03-12","src":"CHE","val":"1"},{"dst":"ATG","filter1":"covid19","filter2":"03-13","src":"GBR","val":"1"},{"dst":"ABW","filter1":"covid19","filter2":"03-13","src":"EGY","val":"1"},{"dst":"ABW","filter1":"covid19","filter2":"03-13","src":"USA","val":"1"},{"dst":"ETH","filter1":"covid19","filter2":"03-13","src":"JPN","val":"1"},{"dst":"GTM","filter1":"covid19","filter2":"03-13","src":"ITA","val":"1"},{"dst":"GIN","filter1":"covid19","filter2":"03-13","src":"BEL","val":"1"},{"dst":"KAZ","filter1":"covid19","filter2":"03-13","src":"DEU","val":"1"},{"dst":"KEN","filter1":"covid19","filter2":"03-13","src":"USA","val":"1"},{"dst":"KEN","filter1":"covid19","filter2":"03-13","src":"GBR","val":"1"},{"dst":"#N/A","filter1":"covid19","filter2":"03-13","src":"NA","val":"1"},{"dst":"MRT","filter1":"covid19","filter2":"03-13","src":"NA","val":"1"},{"dst":"PRI","filter1":"covid19","filter2":"03-13","src":"ITA","val":"1"},{"dst":"LCA","filter1":"covid19","filter2":"03-13","src":"GBR","val":"1"},{"dst":"SDN","filter1":"covid19","filter2":"03-13","src":"ARE","val":"1"},{"dst":"SUR","filter1":"covid19","filter2":"03-13","src":"NLD","val":"1"},{"dst":"URY","filter1":"covid19","filter2":"03-13","src":"ITA","val":"1"},{"dst":"VEN","filter1":"covid19","filter2":"03-13","src":"USA","val":"1"},{"dst":"VEN","filter1":"covid19","filter2":"03-13","src":"ITA","val":"1"},{"dst":"VEN","filter1":"covid19","filter2":"03-13","src":"ESP","val":"1"},{"dst":"CAF","filter1":"covid19","filter2":"03-14","src":"ITA","val":"1"},{"dst":"NA","filter1":"covid19","filter2":"03-14","src":"FRA","val":"1"},{"dst":"GNQ","filter1":"covid19","filter2":"03-14","src":"ESP","val":"1"},{"dst":"NA","filter1":"covid19","filter2":"03-14","src":"USA","val":"1"},{"dst":"NA","filter1":"covid19","filter2":"03-14","src":"LSO","val":"1"},{"dst":"NAM","filter1":"covid19","filter2":"03-14","src":"ESP","val":"1"},{"dst":"RWA","filter1":"covid19","filter2":"03-14","src":"IND","val":"1"},{"dst":"SYC","filter1":"covid19","filter2":"03-14","src":"ITA","val":"1"},{"dst":"NA","filter1":"covid19","filter2":"03-15","src":"NA","val":"1"},{"dst":"UZB","filter1":"covid19","filter2":"03-15","src":"FRA","val":"1"},{"dst":"BEN","filter1":"covid19","filter2":"03-16","src":"BEL","val":"1"},{"dst":"BEN","filter1":"covid19","filter2":"03-16","src":"BFA","val":"1"},{"dst":"GRL","filter1":"covid19","filter2":"03-16","src":"NA","val":"1"},{"dst":"LBR","filter1":"covid19","filter2":"03-16","src":"CHE","val":"1"},{"dst":"SOM","filter1":"covid19","filter2":"03-16","src":"CHN","val":"1"},{"dst":"TZA","filter1":"covid19","filter2":"03-16","src":"BEL","val":"1"},{"dst":"TZA","filter1":"covid19","filter2":"03-16","src":"SWE","val":"1"},{"dst":"TZA","filter1":"covid19","filter2":"03-16","src":"DNK","val":"1"},{"dst":"NA","filter1":"covid19","filter2":"03-17","src":"GBR","val":"1"},{"dst":"BRB","filter1":"covid19","filter2":"03-18","src":"USA","val":"1"},{"dst":"SLV","filter1":"covid19","filter2":"03-18","src":"ITA","val":"1"},{"dst":"GUM","filter1":"covid19","filter2":"03-18","src":"PHL","val":"1"},{"dst":"KGZ","filter1":"covid19","filter2":"03-18","src":"SAU","val":"1"},{"dst":"NIC","filter1":"covid19","filter2":"03-18","src":"PAN","val":"1"},{"dst":"ZMB","filter1":"covid19","filter2":"03-18","src":"FRA","val":"1"},{"dst":"FJI","filter1":"covid19","filter2":"03-19","src":"USA","val":"1"},{"dst":"HTI","filter1":"covid19","filter2":"03-19","src":"NA","val":"1"},{"dst":"MUS","filter1":"covid19","filter2":"03-19","src":"NA","val":"1"},{"dst":"MUS","filter1":"covid19","filter2":"03-19","src":"GBR","val":"1"},{"dst":"PNG","filter1":"covid19","filter2":"03-20","src":"ITA","val":"1"},{"dst":"DMA","filter1":"covid19","filter2":"03-22","src":"GBR","val":"1"},{"dst":"GRD","filter1":"covid19","filter2":"03-22","src":"GBR","val":"1"},{"dst":"CHN","filter1":"covid19","filter2":"12-01","src":"NA","val":"1"},{"dst":"NA","filter1":"covid19","filter2":"NA","src":"NA","val":"1"},{"dst":"GGY","filter1":"covid19","filter2":"NA","src":"NA","val":"1"},{"dst":"NA","filter1":"covid19","filter2":"NA","src":"NA","val":"1"},{"dst":"NA","filter1":"covid19","filter2":"NA","src":"NA","val":"1"},{"dst":"NA","filter1":"covid19","filter2":"NA","src":"NA","val":"1"}]};
		for (var _Flourish_dataset in _Flourish_data) {
				window.template.data[_Flourish_dataset] = _Flourish_data[_Flourish_dataset];
				window.template.data[_Flourish_dataset].column_names = _Flourish_data_column_names[_Flourish_dataset];
		}
		window.template.draw();
	</script></body></html>